<html>
    <head>
        <link rel="stylesheet" href="categorical-styles.css">
        <title>Documento de python resaltado</title>
    </head>
    <body>
        <pre><span style='color:crimson'>"""Random variable generators.
    bytes
    -----
           uniform bytes (values between 0 and 255)
    integers
    --------
           uniform within range
    sequences
    ---------
           pick random element
           pick random sample
           pick weighted random sample
           generate random permutation
    distributions on the real line:
    ------------------------------
           uniform
           triangular
           normal (Gaussian)
           lognormal
           negative exponential
           gamma
           beta
           pareto
           Weibull
    distributions on the circle (angles 0 to 2pi)
    ---------------------------------------------
           circular uniform
           von Mises
General notes on the underlying Mersenne Twister core generator:
* The period is 2**19937-1.
* It is one of the most extensively tested generators in existence.
* The random() method is implemented in C, executes in a single Python step,
  and is, therefore, threadsafe.
"""</span>

<span style='color:darkblue'># Translated by Guido van Rossum from C source provided by</span>
<span style='color:darkblue'># Adrian Baddeley.  Adapted by Raymond Hettinger for use with</span>
<span style='color:darkblue'># the Mersenne Twister  and os.urandom() core generators.</span>

<span style='color:blueviolet'>from</span> <span style='color:darkgreen'>warnings</span> <span style='color:blueviolet'>import</span> <span style='color:darkgreen'>warn</span> <span style='color:blueviolet'>as</span> <span style='color:darkgreen'>_warn</span>
<span style='color:blueviolet'>from</span> <span style='color:darkgreen'>math</span> <span style='color:blueviolet'>import</span> <span style='color:darkgreen'>log</span> <span style='color:blueviolet'>as</span> <span style='color:darkgreen'>_log</span>, <span style='color:darkgreen'>exp</span> <span style='color:blueviolet'>as</span> <span style='color:darkgreen'>_exp</span>, <span style='color:darkgreen'>pi</span> <span style='color:blueviolet'>as</span> <span style='color:darkgreen'>_pi</span>, <span style='color:darkgreen'>e</span> <span style='color:blueviolet'>as</span> <span style='color:darkgreen'>_e</span>, <span style='color:darkgreen'>ceil</span> <span style='color:blueviolet'>as</span> <span style='color:darkgreen'>_ceil</span>
<span style='color:blueviolet'>from</span> <span style='color:darkgreen'>math</span> <span style='color:blueviolet'>import</span> <span style='color:darkgreen'>sqrt</span> <span style='color:blueviolet'>as</span> <span style='color:darkgreen'>_sqrt</span>, <span style='color:darkgreen'>acos</span> <span style='color:blueviolet'>as</span> <span style='color:darkgreen'>_acos</span>, <span style='color:darkgreen'>cos</span> <span style='color:blueviolet'>as</span> <span style='color:darkgreen'>_cos</span>, <span style='color:darkgreen'>sin</span> <span style='color:blueviolet'>as</span> <span style='color:darkgreen'>_sin</span>
<span style='color:blueviolet'>from</span> <span style='color:darkgreen'>math</span> <span style='color:blueviolet'>import</span> <span style='color:darkgreen'>tau</span> <span style='color:blueviolet'>as</span> <span style='color:darkgreen'>TWOPI</span>, <span style='color:darkgreen'>floor</span> <span style='color:blueviolet'>as</span> <span style='color:darkgreen'>_floor</span>, <span style='color:darkgreen'>isfinite</span> <span style='color:blueviolet'>as</span> <span style='color:darkgreen'>_isfinite</span>
<span style='color:blueviolet'>from</span> <span style='color:darkgreen'>os</span> <span style='color:blueviolet'>import</span> <span style='color:darkgreen'>urandom</span> <span style='color:blueviolet'>as</span> <span style='color:darkgreen'>_urandom</span>
<span style='color:blueviolet'>from</span> <span style='color:darkgreen'>_collections_abc</span> <span style='color:blueviolet'>import</span> <span style='color:darkgreen'>Set</span> <span style='color:blueviolet'>as</span> <span style='color:darkgreen'>_Set</span>, <span style='color:darkgreen'>Sequence</span> <span style='color:blueviolet'>as</span> <span style='color:darkgreen'>_Sequence</span>
<span style='color:blueviolet'>from</span> <span style='color:darkgreen'>operator</span> <span style='color:blueviolet'>import</span> <span style='color:darkgreen'>index</span> <span style='color:blueviolet'>as</span> <span style='color:darkgreen'>_index</span>
<span style='color:blueviolet'>from</span> <span style='color:darkgreen'>itertools</span> <span style='color:blueviolet'>import</span> <span style='color:darkgreen'>accumulate</span> <span style='color:blueviolet'>as</span> <span style='color:darkgreen'>_accumulate</span>, <span style='color:darkgreen'>repeat</span> <span style='color:blueviolet'>as</span> <span style='color:darkgreen'>_repeat</span>
<span style='color:blueviolet'>from</span> <span style='color:darkgreen'>bisect</span> <span style='color:blueviolet'>import</span> <span style='color:darkgreen'>bisect</span> <span style='color:blueviolet'>as</span> <span style='color:darkgreen'>_bisect</span>
<span style='color:blueviolet'>import</span> <span style='color:darkgreen'>os</span> <span style='color:blueviolet'>as</span> <span style='color:darkgreen'>_os</span>
<span style='color:blueviolet'>import</span> <span style='color:darkgreen'>_random</span>

<span style='color:blueviolet'>try</span>:
    <span style='color:darkblue'># hashlib is pretty heavy to load, try lean internal module first</span>
    <span style='color:blueviolet'>from</span> <span style='color:darkgreen'>_sha512</span> <span style='color:blueviolet'>import</span> <span style='color:darkgreen'>sha512</span> <span style='color:blueviolet'>as</span> <span style='color:darkgreen'>_sha512</span>
<span style='color:blueviolet'>except</span> <span style='color:darkgreen'>ImportError</span>:
    <span style='color:darkblue'># fallback to official implementation</span>
    <span style='color:blueviolet'>from</span> <span style='color:darkgreen'>hashlib</span> <span style='color:blueviolet'>import</span> <span style='color:darkgreen'>sha512</span> <span style='color:blueviolet'>as</span> <span style='color:darkgreen'>_sha512</span>

<span style='color:darkgreen'>__all__</span> = [
    <span style='color:crimson'>"Random"</span>,
    <span style='color:crimson'>"SystemRandom"</span>,
    <span style='color:crimson'>"betavariate"</span>,
    <span style='color:crimson'>"choice"</span>,
    <span style='color:crimson'>"choices"</span>,
    <span style='color:crimson'>"expovariate"</span>,
    <span style='color:crimson'>"gammavariate"</span>,
    <span style='color:crimson'>"gauss"</span>,
    <span style='color:crimson'>"getrandbits"</span>,
    <span style='color:crimson'>"getstate"</span>,
    <span style='color:crimson'>"lognormvariate"</span>,
    <span style='color:crimson'>"normalvariate"</span>,
    <span style='color:crimson'>"paretovariate"</span>,
    <span style='color:crimson'>"randbytes"</span>,
    <span style='color:crimson'>"randint"</span>,
    <span style='color:crimson'>"random"</span>,
    <span style='color:crimson'>"randrange"</span>,
    <span style='color:crimson'>"sample"</span>,
    <span style='color:crimson'>"seed"</span>,
    <span style='color:crimson'>"setstate"</span>,
    <span style='color:crimson'>"shuffle"</span>,
    <span style='color:crimson'>"triangular"</span>,
    <span style='color:crimson'>"uniform"</span>,
    <span style='color:crimson'>"vonmisesvariate"</span>,
    <span style='color:crimson'>"weibullvariate"</span>,
]

<span style='color:darkgreen'>NV_MAGICCONST</span> = 4 * <span style='color:darkgreen'>_exp</span>(-0.5) / <span style='color:darkgreen'>_sqrt</span>(2.0)
<span style='color:darkgreen'>LOG4</span> = <span style='color:darkgreen'>_log</span>(4.0)
<span style='color:darkgreen'>SG_MAGICCONST</span> = 1.0 + <span style='color:darkgreen'>_log</span>(4.5)
<span style='color:darkgreen'>BPF</span> = 53        <span style='color:darkblue'># Number of bits in a float</span>
<span style='color:darkgreen'>RECIP_BPF</span> = 2 ** -<span style='color:darkgreen'>BPF</span>
<span style='color:darkgreen'>_ONE</span> = 1


<span style='color:blueviolet'>class</span> <span style='color:darkgreen'>Random</span>(<span style='color:darkgreen'>_random</span>.<span style='color:darkgreen'>Random</span>):
    <span style='color:crimson'>"""Random number generator base class used by bound module functions.
    Used to instantiate instances of Random to get generators that don't
    share state.
    Class Random can also be subclassed if you want to use a different basic
    generator of your own devising: in that case, override the following
    methods:  random(), seed(), getstate(), and setstate().
    Optionally, implement a getrandbits() method so that randrange()
    can cover arbitrarily large ranges.
    """</span>

    <span style='color:darkgreen'>VERSION</span> = 3     <span style='color:darkblue'># used by getstate/setstate</span>

    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>__init__</span>(<span style='color:darkgreen'>self</span>, <span style='color:darkgreen'>x</span>=<span style='color:blueviolet'>None</span>):
        <span style='color:crimson'>"""Initialize an instance.
        Optional argument x controls seeding, as for Random.seed().
        """</span>

        <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>seed</span>(<span style='color:darkgreen'>x</span>)
        <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>gauss_next</span> = <span style='color:blueviolet'>None</span>

    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>seed</span>(<span style='color:darkgreen'>self</span>, <span style='color:darkgreen'>a</span>=<span style='color:blueviolet'>None</span>, <span style='color:darkgreen'>version</span>=2):
        <span style='color:crimson'>"""Initialize internal state from a seed.
        The only supported seed types are None, int, float,
        str, bytes, and bytearray.
        None or no argument seeds from current time or from an operating
        system specific randomness source if available.
        If *a* is an int, all bits are used.
        For version 2 (the default), all of the bits are used if *a* is a str,
        bytes, or bytearray.  For version 1 (provided for reproducing random
        sequences from older versions of Python), the algorithm for str and
        bytes generates a narrower range of seeds.
        """</span>

        <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>version</span> == 1 <span style='color:blueviolet'>and</span> <span style='color:darkgreen'>isinstance</span>(<span style='color:darkgreen'>a</span>, (<span style='color:darkgreen'>str</span>, <span style='color:darkgreen'>bytes</span>)):
            <span style='color:darkgreen'>a</span> = <span style='color:darkgreen'>a</span>.<span style='color:darkgreen'>decode</span>(<span style='color:crimson'>'latin-1'</span>) <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>isinstance</span>(<span style='color:darkgreen'>a</span>, <span style='color:darkgreen'>bytes</span>) <span style='color:blueviolet'>else</span> <span style='color:darkgreen'>a</span>
            <span style='color:darkgreen'>x</span> = <span style='color:darkgreen'>ord</span>(<span style='color:darkgreen'>a</span>[0]) << 7 <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>a</span> <span style='color:blueviolet'>else</span> 0
            <span style='color:blueviolet'>for</span> <span style='color:darkgreen'>c</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>map</span>(<span style='color:darkgreen'>ord</span>, <span style='color:darkgreen'>a</span>):
                <span style='color:darkgreen'>x</span> = ((1000003 * <span style='color:darkgreen'>x</span>) ^ <span style='color:darkgreen'>c</span>) & 0xFFFFFFFFFFFFFFFF
            <span style='color:darkgreen'>x</span> ^= <span style='color:darkgreen'>len</span>(<span style='color:darkgreen'>a</span>)
            <span style='color:darkgreen'>a</span> = -2 <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>x</span> == -1 <span style='color:blueviolet'>else</span> <span style='color:darkgreen'>x</span>

        <span style='color:blueviolet'>elif</span> <span style='color:darkgreen'>version</span> == 2 <span style='color:blueviolet'>and</span> <span style='color:darkgreen'>isinstance</span>(<span style='color:darkgreen'>a</span>, (<span style='color:darkgreen'>str</span>, <span style='color:darkgreen'>bytes</span>, <span style='color:darkgreen'>bytearray</span>)):
            <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>isinstance</span>(<span style='color:darkgreen'>a</span>, <span style='color:darkgreen'>str</span>):
                <span style='color:darkgreen'>a</span> = <span style='color:darkgreen'>a</span>.<span style='color:darkgreen'>encode</span>()
            <span style='color:darkgreen'>a</span> = <span style='color:darkgreen'>int</span>.<span style='color:darkgreen'>from_bytes</span>(<span style='color:darkgreen'>a</span> + <span style='color:darkgreen'>_sha512</span>(<span style='color:darkgreen'>a</span>).<span style='color:darkgreen'>digest</span>(), <span style='color:crimson'>'big'</span>)

        <span style='color:blueviolet'>elif</span> <span style='color:blueviolet'>not</span> <span style='color:darkgreen'>isinstance</span>(<span style='color:darkgreen'>a</span>, (<span style='color:darkgreen'>type</span>(<span style='color:blueviolet'>None</span>), <span style='color:darkgreen'>int</span>, <span style='color:darkgreen'>float</span>, <span style='color:darkgreen'>str</span>, <span style='color:darkgreen'>bytes</span>, <span style='color:darkgreen'>bytearray</span>)):
            <span style='color:blueviolet'>raise</span> <span style='color:darkgreen'>TypeError</span>(<span style='color:crimson'>'The only supported seed types are: None,\n'</span>
                            <span style='color:crimson'>'int, float, str, bytes, and bytearray.'</span>)

        <span style='color:darkgreen'>super</span>().<span style='color:darkgreen'>seed</span>(<span style='color:darkgreen'>a</span>)
        <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>gauss_next</span> = <span style='color:blueviolet'>None</span>

    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>getstate</span>(<span style='color:darkgreen'>self</span>):
        <span style='color:crimson'>"""Return internal state; can be passed to setstate() later."""</span>
        <span style='color:blueviolet'>return</span> <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>VERSION</span>, <span style='color:darkgreen'>super</span>().<span style='color:darkgreen'>getstate</span>(), <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>gauss_next</span>

    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>setstate</span>(<span style='color:darkgreen'>self</span>, <span style='color:darkgreen'>state</span>):
        <span style='color:crimson'>"""Restore internal state from object returned by getstate()."""</span>
        <span style='color:darkgreen'>version</span> = <span style='color:darkgreen'>state</span>[0]
        <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>version</span> == 3:
            <span style='color:darkgreen'>version</span>, <span style='color:darkgreen'>internalstate</span>, <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>gauss_next</span> = <span style='color:darkgreen'>state</span>
            <span style='color:darkgreen'>super</span>().<span style='color:darkgreen'>setstate</span>(<span style='color:darkgreen'>internalstate</span>)
        <span style='color:blueviolet'>elif</span> <span style='color:darkgreen'>version</span> == 2:
            <span style='color:darkgreen'>version</span>, <span style='color:darkgreen'>internalstate</span>, <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>gauss_next</span> = <span style='color:darkgreen'>state</span>
            <span style='color:darkblue'># In version 2, the state was saved as signed ints, which causes</span>
            <span style='color:darkblue'>#   inconsistencies between 32/64-bit systems. The state is</span>
            <span style='color:darkblue'>#   really unsigned 32-bit ints, so we convert negative ints from</span>
            <span style='color:darkblue'>#   version 2 to positive longs for version 3.</span>
            <span style='color:blueviolet'>try</span>:
                <span style='color:darkgreen'>internalstate</span> = <span style='color:darkgreen'>tuple</span>(<span style='color:darkgreen'>x</span> % (2 ** 32) <span style='color:blueviolet'>for</span> <span style='color:darkgreen'>x</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>internalstate</span>)
            <span style='color:blueviolet'>except</span> <span style='color:darkgreen'>ValueError</span> <span style='color:blueviolet'>as</span> <span style='color:darkgreen'>e</span>:
                <span style='color:blueviolet'>raise</span> <span style='color:darkgreen'>TypeError</span> <span style='color:blueviolet'>from</span> <span style='color:darkgreen'>e</span>
            <span style='color:darkgreen'>super</span>().<span style='color:darkgreen'>setstate</span>(<span style='color:darkgreen'>internalstate</span>)
        <span style='color:blueviolet'>else</span>:
            <span style='color:blueviolet'>raise</span> <span style='color:darkgreen'>ValueError</span>(<span style='color:crimson'>"state with version %s passed to "</span>
                             <span style='color:crimson'>"Random.setstate() of version %s"</span> %
                             (<span style='color:darkgreen'>version</span>, <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>VERSION</span>))


    <span style='color:darkblue'>## -------------------------------------------------------</span>
    <span style='color:darkblue'>## ---- Methods below this point do not need to be overridden or extended</span>
    <span style='color:darkblue'>## ---- when subclassing for the purpose of using a different core generator.</span>


    <span style='color:darkblue'>## -------------------- pickle support  -------------------</span>

    <span style='color:darkblue'># Issue 17489: Since __reduce__ was defined to fix #759889 this is no</span>
    <span style='color:darkblue'># longer called; we leave it here because it has been here since random was</span>
    <span style='color:darkblue'># rewritten back in 2001 and why risk breaking something.</span>
    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>__getstate__</span>(<span style='color:darkgreen'>self</span>):  <span style='color:darkblue'># for pickle</span>
        <span style='color:blueviolet'>return</span> <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>getstate</span>()

    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>__setstate__</span>(<span style='color:darkgreen'>self</span>, <span style='color:darkgreen'>state</span>):  <span style='color:darkblue'># for pickle</span>
        <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>setstate</span>(<span style='color:darkgreen'>state</span>)

    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>__reduce__</span>(<span style='color:darkgreen'>self</span>):
        <span style='color:blueviolet'>return</span> <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>__class__</span>, (), <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>getstate</span>()


    <span style='color:darkblue'>## ---- internal support method for evenly distributed integers ----</span>

    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>__init_subclass__</span>(<span style='color:darkgreen'>cls</span>, /, **<span style='color:darkgreen'>kwargs</span>):
        <span style='color:crimson'>"""Control how subclasses generate random integers.
        The algorithm a subclass can use depends on the random() and/or
        getrandbits() implementation available to it and determines
        whether it can generate random integers from arbitrarily large
        ranges.
        """</span>

        <span style='color:blueviolet'>for</span> <span style='color:darkgreen'>c</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>cls</span>.<span style='color:darkgreen'>__mro__</span>:
            <span style='color:blueviolet'>if</span> <span style='color:crimson'>'_randbelow'</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>c</span>.<span style='color:darkgreen'>__dict__</span>:
                <span style='color:darkblue'># just inherit it</span>
                <span style='color:blueviolet'>break</span>
            <span style='color:blueviolet'>if</span> <span style='color:crimson'>'getrandbits'</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>c</span>.<span style='color:darkgreen'>__dict__</span>:
                <span style='color:darkgreen'>cls</span>.<span style='color:darkgreen'>_randbelow</span> = <span style='color:darkgreen'>cls</span>.<span style='color:darkgreen'>_randbelow_with_getrandbits</span>
                <span style='color:blueviolet'>break</span>
            <span style='color:blueviolet'>if</span> <span style='color:crimson'>'random'</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>c</span>.<span style='color:darkgreen'>__dict__</span>:
                <span style='color:darkgreen'>cls</span>.<span style='color:darkgreen'>_randbelow</span> = <span style='color:darkgreen'>cls</span>.<span style='color:darkgreen'>_randbelow_without_getrandbits</span>
                <span style='color:blueviolet'>break</span>

    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>_randbelow_with_getrandbits</span>(<span style='color:darkgreen'>self</span>, <span style='color:darkgreen'>n</span>):
        <span style='color:crimson'>"Return a random int in the range [0,n).  Returns 0 if n==0."</span>

        <span style='color:blueviolet'>if</span> <span style='color:blueviolet'>not</span> <span style='color:darkgreen'>n</span>:
            <span style='color:blueviolet'>return</span> 0
        <span style='color:darkgreen'>getrandbits</span> = <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>getrandbits</span>
        <span style='color:darkgreen'>k</span> = <span style='color:darkgreen'>n</span>.<span style='color:darkgreen'>bit_length</span>()  <span style='color:darkblue'># don't use (n-1) here because n can be 1</span>
        <span style='color:darkgreen'>r</span> = <span style='color:darkgreen'>getrandbits</span>(<span style='color:darkgreen'>k</span>)  <span style='color:darkblue'># 0 <= r < 2**k</span>
        <span style='color:blueviolet'>while</span> <span style='color:darkgreen'>r</span> >= <span style='color:darkgreen'>n</span>:
            <span style='color:darkgreen'>r</span> = <span style='color:darkgreen'>getrandbits</span>(<span style='color:darkgreen'>k</span>)
        <span style='color:blueviolet'>return</span> <span style='color:darkgreen'>r</span>

    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>_randbelow_without_getrandbits</span>(<span style='color:darkgreen'>self</span>, <span style='color:darkgreen'>n</span>, <span style='color:darkgreen'>maxsize</span>=1<<<span style='color:darkgreen'>BPF</span>):
        <span style='color:crimson'>"""Return a random int in the range [0,n).  Returns 0 if n==0.
        The implementation does not use getrandbits, but only random.
        """</span>

        <span style='color:darkgreen'>random</span> = <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>random</span>
        <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>n</span> >= <span style='color:darkgreen'>maxsize</span>:
            <span style='color:darkgreen'>_warn</span>(<span style='color:crimson'>"Underlying random() generator does not supply \n"</span>
                <span style='color:crimson'>"enough bits to choose from a population range this large.\n"</span>
                <span style='color:crimson'>"To remove the range limitation, add a getrandbits() method."</span>)
            <span style='color:blueviolet'>return</span> <span style='color:darkgreen'>_floor</span>(<span style='color:darkgreen'>random</span>() * <span style='color:darkgreen'>n</span>)
        <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>n</span> == 0:
            <span style='color:blueviolet'>return</span> 0
        <span style='color:darkgreen'>rem</span> = <span style='color:darkgreen'>maxsize</span> % <span style='color:darkgreen'>n</span>
        <span style='color:darkgreen'>limit</span> = (<span style='color:darkgreen'>maxsize</span> - <span style='color:darkgreen'>rem</span>) / <span style='color:darkgreen'>maxsize</span>   <span style='color:darkblue'># int(limit * maxsize) % n == 0</span>
        <span style='color:darkgreen'>r</span> = <span style='color:darkgreen'>random</span>()
        <span style='color:blueviolet'>while</span> <span style='color:darkgreen'>r</span> >= <span style='color:darkgreen'>limit</span>:
            <span style='color:darkgreen'>r</span> = <span style='color:darkgreen'>random</span>()
        <span style='color:blueviolet'>return</span> <span style='color:darkgreen'>_floor</span>(<span style='color:darkgreen'>r</span> * <span style='color:darkgreen'>maxsize</span>) % <span style='color:darkgreen'>n</span>

    <span style='color:darkgreen'>_randbelow</span> = <span style='color:darkgreen'>_randbelow_with_getrandbits</span>


    <span style='color:darkblue'>## --------------------------------------------------------</span>
    <span style='color:darkblue'>## ---- Methods below this point generate custom distributions</span>
    <span style='color:darkblue'>## ---- based on the methods defined above.  They do not</span>
    <span style='color:darkblue'>## ---- directly touch the underlying generator and only</span>
    <span style='color:darkblue'>## ---- access randomness through the methods:  random(),</span>
    <span style='color:darkblue'>## ---- getrandbits(), or _randbelow().</span>


    <span style='color:darkblue'>## -------------------- bytes methods ---------------------</span>

    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>randbytes</span>(<span style='color:darkgreen'>self</span>, <span style='color:darkgreen'>n</span>):
        <span style='color:crimson'>"""Generate n random bytes."""</span>
        <span style='color:blueviolet'>return</span> <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>getrandbits</span>(<span style='color:darkgreen'>n</span> * 8).<span style='color:darkgreen'>to_bytes</span>(<span style='color:darkgreen'>n</span>, <span style='color:crimson'>'little'</span>)


    <span style='color:darkblue'>## -------------------- integer methods  -------------------</span>

    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>randrange</span>(<span style='color:darkgreen'>self</span>, <span style='color:darkgreen'>start</span>, <span style='color:darkgreen'>stop</span>=<span style='color:blueviolet'>None</span>, <span style='color:darkgreen'>step</span>=<span style='color:darkgreen'>_ONE</span>):
        <span style='color:crimson'>"""Choose a random item from range(start, stop[, step]).
        This fixes the problem with randint() which includes the
        endpoint; in Python this is usually not what you want.
        """</span>

        <span style='color:darkblue'># This code is a bit messy to make it fast for the</span>
        <span style='color:darkblue'># common case while still doing adequate error checking.</span>
        <span style='color:blueviolet'>try</span>:
            <span style='color:darkgreen'>istart</span> = <span style='color:darkgreen'>_index</span>(<span style='color:darkgreen'>start</span>)
        <span style='color:blueviolet'>except</span> <span style='color:darkgreen'>TypeError</span>:
            <span style='color:darkgreen'>istart</span> = <span style='color:darkgreen'>int</span>(<span style='color:darkgreen'>start</span>)
            <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>istart</span> != <span style='color:darkgreen'>start</span>:
                <span style='color:darkgreen'>_warn</span>(<span style='color:crimson'>'randrange() will raise TypeError in the future'</span>,
                      <span style='color:darkgreen'>DeprecationWarning</span>, 2)
                <span style='color:blueviolet'>raise</span> <span style='color:darkgreen'>ValueError</span>(<span style='color:crimson'>"non-integer arg 1 for randrange()"</span>)
            <span style='color:darkgreen'>_warn</span>(<span style='color:crimson'>'non-integer arguments to randrange() have been deprecated '</span>
                  <span style='color:crimson'>'since Python 3.10 and will be removed in a subsequent '</span>
                  <span style='color:crimson'>'version'</span>,
                  <span style='color:darkgreen'>DeprecationWarning</span>, 2)
        <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>stop</span> <span style='color:blueviolet'>is</span> <span style='color:blueviolet'>None</span>:
            <span style='color:darkblue'># We don't check for "step != 1" because it hasn't been</span>
            <span style='color:darkblue'># type checked and converted to an integer yet.</span>
            <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>step</span> <span style='color:blueviolet'>is</span> <span style='color:blueviolet'>not</span> <span style='color:darkgreen'>_ONE</span>:
                <span style='color:blueviolet'>raise</span> <span style='color:darkgreen'>TypeError</span>(<span style='color:crimson'>'Missing a non-None stop argument'</span>)
            <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>istart</span> > 0:
                <span style='color:blueviolet'>return</span> <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>_randbelow</span>(<span style='color:darkgreen'>istart</span>)
            <span style='color:blueviolet'>raise</span> <span style='color:darkgreen'>ValueError</span>(<span style='color:crimson'>"empty range for randrange()"</span>)

        <span style='color:darkblue'># stop argument supplied.</span>
        <span style='color:blueviolet'>try</span>:
            <span style='color:darkgreen'>istop</span> = <span style='color:darkgreen'>_index</span>(<span style='color:darkgreen'>stop</span>)
        <span style='color:blueviolet'>except</span> <span style='color:darkgreen'>TypeError</span>:
            <span style='color:darkgreen'>istop</span> = <span style='color:darkgreen'>int</span>(<span style='color:darkgreen'>stop</span>)
            <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>istop</span> != <span style='color:darkgreen'>stop</span>:
                <span style='color:darkgreen'>_warn</span>(<span style='color:crimson'>'randrange() will raise TypeError in the future'</span>,
                      <span style='color:darkgreen'>DeprecationWarning</span>, 2)
                <span style='color:blueviolet'>raise</span> <span style='color:darkgreen'>ValueError</span>(<span style='color:crimson'>"non-integer stop for randrange()"</span>)
            <span style='color:darkgreen'>_warn</span>(<span style='color:crimson'>'non-integer arguments to randrange() have been deprecated '</span>
                  <span style='color:crimson'>'since Python 3.10 and will be removed in a subsequent '</span>
                  <span style='color:crimson'>'version'</span>,
                  <span style='color:darkgreen'>DeprecationWarning</span>, 2)
        <span style='color:darkgreen'>width</span> = <span style='color:darkgreen'>istop</span> - <span style='color:darkgreen'>istart</span>
        <span style='color:blueviolet'>try</span>:
            <span style='color:darkgreen'>istep</span> = <span style='color:darkgreen'>_index</span>(<span style='color:darkgreen'>step</span>)
        <span style='color:blueviolet'>except</span> <span style='color:darkgreen'>TypeError</span>:
            <span style='color:darkgreen'>istep</span> = <span style='color:darkgreen'>int</span>(<span style='color:darkgreen'>step</span>)
            <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>istep</span> != <span style='color:darkgreen'>step</span>:
                <span style='color:darkgreen'>_warn</span>(<span style='color:crimson'>'randrange() will raise TypeError in the future'</span>,
                      <span style='color:darkgreen'>DeprecationWarning</span>, 2)
                <span style='color:blueviolet'>raise</span> <span style='color:darkgreen'>ValueError</span>(<span style='color:crimson'>"non-integer step for randrange()"</span>)
            <span style='color:darkgreen'>_warn</span>(<span style='color:crimson'>'non-integer arguments to randrange() have been deprecated '</span>
                  <span style='color:crimson'>'since Python 3.10 and will be removed in a subsequent '</span>
                  <span style='color:crimson'>'version'</span>,
                  <span style='color:darkgreen'>DeprecationWarning</span>, 2)
        <span style='color:darkblue'># Fast path.</span>
        <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>istep</span> == 1:
            <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>width</span> > 0:
                <span style='color:blueviolet'>return</span> <span style='color:darkgreen'>istart</span> + <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>_randbelow</span>(<span style='color:darkgreen'>width</span>)
            <span style='color:blueviolet'>raise</span> <span style='color:darkgreen'>ValueError</span>(<span style='color:crimson'>"empty range for randrange() (%d, %d, %d)"</span> % (<span style='color:darkgreen'>istart</span>, <span style='color:darkgreen'>istop</span>, <span style='color:darkgreen'>width</span>))

        <span style='color:darkblue'># Non-unit step argument supplied.</span>
        <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>istep</span> > 0:
            <span style='color:darkgreen'>n</span> = (<span style='color:darkgreen'>width</span> + <span style='color:darkgreen'>istep</span> - 1) // <span style='color:darkgreen'>istep</span>
        <span style='color:blueviolet'>elif</span> <span style='color:darkgreen'>istep</span> < 0:
            <span style='color:darkgreen'>n</span> = (<span style='color:darkgreen'>width</span> + <span style='color:darkgreen'>istep</span> + 1) // <span style='color:darkgreen'>istep</span>
        <span style='color:blueviolet'>else</span>:
            <span style='color:blueviolet'>raise</span> <span style='color:darkgreen'>ValueError</span>(<span style='color:crimson'>"zero step for randrange()"</span>)
        <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>n</span> <= 0:
            <span style='color:blueviolet'>raise</span> <span style='color:darkgreen'>ValueError</span>(<span style='color:crimson'>"empty range for randrange()"</span>)
        <span style='color:blueviolet'>return</span> <span style='color:darkgreen'>istart</span> + <span style='color:darkgreen'>istep</span> * <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>_randbelow</span>(<span style='color:darkgreen'>n</span>)

    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>randint</span>(<span style='color:darkgreen'>self</span>, <span style='color:darkgreen'>a</span>, <span style='color:darkgreen'>b</span>):
        <span style='color:crimson'>"""Return random integer in range [a, b], including both end points.
        """</span>

        <span style='color:blueviolet'>return</span> <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>randrange</span>(<span style='color:darkgreen'>a</span>, <span style='color:darkgreen'>b</span>+1)


    <span style='color:darkblue'>## -------------------- sequence methods  -------------------</span>

    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>choice</span>(<span style='color:darkgreen'>self</span>, <span style='color:darkgreen'>seq</span>):
        <span style='color:crimson'>"""Choose a random element from a non-empty sequence."""</span>
        <span style='color:darkblue'># raises IndexError if seq is empty</span>
        <span style='color:blueviolet'>return</span> <span style='color:darkgreen'>seq</span>[<span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>_randbelow</span>(<span style='color:darkgreen'>len</span>(<span style='color:darkgreen'>seq</span>))]

    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>shuffle</span>(<span style='color:darkgreen'>self</span>, <span style='color:darkgreen'>x</span>):
        <span style='color:crimson'>"""Shuffle list x in place, and return None."""</span>

        <span style='color:darkgreen'>randbelow</span> = <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>_randbelow</span>
        <span style='color:blueviolet'>for</span> <span style='color:darkgreen'>i</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>reversed</span>(<span style='color:darkgreen'>range</span>(1, <span style='color:darkgreen'>len</span>(<span style='color:darkgreen'>x</span>))):
            <span style='color:darkblue'># pick an element in x[:i+1] with which to exchange x[i]</span>
            <span style='color:darkgreen'>j</span> = <span style='color:darkgreen'>randbelow</span>(<span style='color:darkgreen'>i</span> + 1)
            <span style='color:darkgreen'>x</span>[<span style='color:darkgreen'>i</span>], <span style='color:darkgreen'>x</span>[<span style='color:darkgreen'>j</span>] = <span style='color:darkgreen'>x</span>[<span style='color:darkgreen'>j</span>], <span style='color:darkgreen'>x</span>[<span style='color:darkgreen'>i</span>]

    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>sample</span>(<span style='color:darkgreen'>self</span>, <span style='color:darkgreen'>population</span>, <span style='color:darkgreen'>k</span>, *, <span style='color:darkgreen'>counts</span>=<span style='color:blueviolet'>None</span>):
        <span style='color:crimson'>"""Chooses k unique random elements from a population sequence.
        Returns a new list containing elements from the population while
        leaving the original population unchanged.  The resulting list is
        in selection order so that all sub-slices will also be valid random
        samples.  This allows raffle winners (the sample) to be partitioned
        into grand prize and second place winners (the subslices).
        Members of the population need not be hashable or unique.  If the
        population contains repeats, then each occurrence is a possible
        selection in the sample.
        Repeated elements can be specified one at a time or with the optional
        counts parameter.  For example:
            sample(['red', 'blue'], counts=[4, 2], k=5)
        is equivalent to:
            sample(['red', 'red', 'red', 'red', 'blue', 'blue'], k=5)
        To choose a sample from a range of integers, use range() for the
        population argument.  This is especially fast and space efficient
        for sampling from a large population:
            sample(range(10000000), 60)
        """</span>

        <span style='color:darkblue'># Sampling without replacement entails tracking either potential</span>
        <span style='color:darkblue'># selections (the pool) in a list or previous selections in a set.</span>

        <span style='color:darkblue'># When the number of selections is small compared to the</span>
        <span style='color:darkblue'># population, then tracking selections is efficient, requiring</span>
        <span style='color:darkblue'># only a small set and an occasional reselection.  For</span>
        <span style='color:darkblue'># a larger number of selections, the pool tracking method is</span>
        <span style='color:darkblue'># preferred since the list takes less space than the</span>
        <span style='color:darkblue'># set and it doesn't suffer from frequent reselections.</span>

        <span style='color:darkblue'># The number of calls to _randbelow() is kept at or near k, the</span>
        <span style='color:darkblue'># theoretical minimum.  This is important because running time</span>
        <span style='color:darkblue'># is dominated by _randbelow() and because it extracts the</span>
        <span style='color:darkblue'># least entropy from the underlying random number generators.</span>

        <span style='color:darkblue'># Memory requirements are kept to the smaller of a k-length</span>
        <span style='color:darkblue'># set or an n-length list.</span>

        <span style='color:darkblue'># There are other sampling algorithms that do not require</span>
        <span style='color:darkblue'># auxiliary memory, but they were rejected because they made</span>
        <span style='color:darkblue'># too many calls to _randbelow(), making them slower and</span>
        <span style='color:darkblue'># causing them to eat more entropy than necessary.</span>

        <span style='color:blueviolet'>if</span> <span style='color:blueviolet'>not</span> <span style='color:darkgreen'>isinstance</span>(<span style='color:darkgreen'>population</span>, <span style='color:darkgreen'>_Sequence</span>):
            <span style='color:blueviolet'>raise</span> <span style='color:darkgreen'>TypeError</span>(<span style='color:crimson'>"Population must be a sequence.  "</span>
                            <span style='color:crimson'>"For dicts or sets, use sorted(d)."</span>)
        <span style='color:darkgreen'>n</span> = <span style='color:darkgreen'>len</span>(<span style='color:darkgreen'>population</span>)
        <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>counts</span> <span style='color:blueviolet'>is</span> <span style='color:blueviolet'>not</span> <span style='color:blueviolet'>None</span>:
            <span style='color:darkgreen'>cum_counts</span> = <span style='color:darkgreen'>list</span>(<span style='color:darkgreen'>_accumulate</span>(<span style='color:darkgreen'>counts</span>))
            <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>len</span>(<span style='color:darkgreen'>cum_counts</span>) != <span style='color:darkgreen'>n</span>:
                <span style='color:blueviolet'>raise</span> <span style='color:darkgreen'>ValueError</span>(<span style='color:crimson'>'The number of counts does not match the population'</span>)
            <span style='color:darkgreen'>total</span> = <span style='color:darkgreen'>cum_counts</span>.<span style='color:darkgreen'>pop</span>()
            <span style='color:blueviolet'>if</span> <span style='color:blueviolet'>not</span> <span style='color:darkgreen'>isinstance</span>(<span style='color:darkgreen'>total</span>, <span style='color:darkgreen'>int</span>):
                <span style='color:blueviolet'>raise</span> <span style='color:darkgreen'>TypeError</span>(<span style='color:crimson'>'Counts must be integers'</span>)
            <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>total</span> <= 0:
                <span style='color:blueviolet'>raise</span> <span style='color:darkgreen'>ValueError</span>(<span style='color:crimson'>'Total of counts must be greater than zero'</span>)
            <span style='color:darkgreen'>selections</span> = <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>sample</span>(<span style='color:darkgreen'>range</span>(<span style='color:darkgreen'>total</span>), <span style='color:darkgreen'>k</span>=<span style='color:darkgreen'>k</span>)
            <span style='color:darkgreen'>bisect</span> = <span style='color:darkgreen'>_bisect</span>
            <span style='color:blueviolet'>return</span> [<span style='color:darkgreen'>population</span>[<span style='color:darkgreen'>bisect</span>(<span style='color:darkgreen'>cum_counts</span>, <span style='color:darkgreen'>s</span>)] <span style='color:blueviolet'>for</span> <span style='color:darkgreen'>s</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>selections</span>]
        <span style='color:darkgreen'>randbelow</span> = <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>_randbelow</span>
        <span style='color:blueviolet'>if</span> <span style='color:blueviolet'>not</span> 0 <= <span style='color:darkgreen'>k</span> <= <span style='color:darkgreen'>n</span>:
            <span style='color:blueviolet'>raise</span> <span style='color:darkgreen'>ValueError</span>(<span style='color:crimson'>"Sample larger than population or is negative"</span>)
        <span style='color:darkgreen'>result</span> = [<span style='color:blueviolet'>None</span>] * <span style='color:darkgreen'>k</span>
        <span style='color:darkgreen'>setsize</span> = 21        <span style='color:darkblue'># size of a small set minus size of an empty list</span>
        <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>k</span> > 5:
            <span style='color:darkgreen'>setsize</span> += 4 ** <span style='color:darkgreen'>_ceil</span>(<span style='color:darkgreen'>_log</span>(<span style='color:darkgreen'>k</span> * 3, 4))  <span style='color:darkblue'># table size for big sets</span>
        <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>n</span> <= <span style='color:darkgreen'>setsize</span>:
            <span style='color:darkblue'># An n-length list is smaller than a k-length set.</span>
            <span style='color:darkblue'># Invariant:  non-selected at pool[0 : n-i]</span>
            <span style='color:darkgreen'>pool</span> = <span style='color:darkgreen'>list</span>(<span style='color:darkgreen'>population</span>)
            <span style='color:blueviolet'>for</span> <span style='color:darkgreen'>i</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>range</span>(<span style='color:darkgreen'>k</span>):
                <span style='color:darkgreen'>j</span> = <span style='color:darkgreen'>randbelow</span>(<span style='color:darkgreen'>n</span> - <span style='color:darkgreen'>i</span>)
                <span style='color:darkgreen'>result</span>[<span style='color:darkgreen'>i</span>] = <span style='color:darkgreen'>pool</span>[<span style='color:darkgreen'>j</span>]
                <span style='color:darkgreen'>pool</span>[<span style='color:darkgreen'>j</span>] = <span style='color:darkgreen'>pool</span>[<span style='color:darkgreen'>n</span> - <span style='color:darkgreen'>i</span> - 1]  <span style='color:darkblue'># move non-selected item into vacancy</span>
        <span style='color:blueviolet'>else</span>:
            <span style='color:darkgreen'>selected</span> = <span style='color:darkgreen'>set</span>()
            <span style='color:darkgreen'>selected_add</span> = <span style='color:darkgreen'>selected</span>.<span style='color:darkgreen'>add</span>
            <span style='color:blueviolet'>for</span> <span style='color:darkgreen'>i</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>range</span>(<span style='color:darkgreen'>k</span>):
                <span style='color:darkgreen'>j</span> = <span style='color:darkgreen'>randbelow</span>(<span style='color:darkgreen'>n</span>)
                <span style='color:blueviolet'>while</span> <span style='color:darkgreen'>j</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>selected</span>:
                    <span style='color:darkgreen'>j</span> = <span style='color:darkgreen'>randbelow</span>(<span style='color:darkgreen'>n</span>)
                <span style='color:darkgreen'>selected_add</span>(<span style='color:darkgreen'>j</span>)
                <span style='color:darkgreen'>result</span>[<span style='color:darkgreen'>i</span>] = <span style='color:darkgreen'>population</span>[<span style='color:darkgreen'>j</span>]
        <span style='color:blueviolet'>return</span> <span style='color:darkgreen'>result</span>

    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>choices</span>(<span style='color:darkgreen'>self</span>, <span style='color:darkgreen'>population</span>, <span style='color:darkgreen'>weights</span>=<span style='color:blueviolet'>None</span>, *, <span style='color:darkgreen'>cum_weights</span>=<span style='color:blueviolet'>None</span>, <span style='color:darkgreen'>k</span>=1):
        <span style='color:crimson'>"""Return a k sized list of population elements chosen with replacement.
        If the relative weights or cumulative weights are not specified,
        the selections are made with equal probability.
        """</span>
        <span style='color:darkgreen'>random</span> = <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>random</span>
        <span style='color:darkgreen'>n</span> = <span style='color:darkgreen'>len</span>(<span style='color:darkgreen'>population</span>)
        <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>cum_weights</span> <span style='color:blueviolet'>is</span> <span style='color:blueviolet'>None</span>:
            <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>weights</span> <span style='color:blueviolet'>is</span> <span style='color:blueviolet'>None</span>:
                <span style='color:darkgreen'>floor</span> = <span style='color:darkgreen'>_floor</span>
                <span style='color:darkgreen'>n</span> += 0.0    <span style='color:darkblue'># convert to float for a small speed improvement</span>
                <span style='color:blueviolet'>return</span> [<span style='color:darkgreen'>population</span>[<span style='color:darkgreen'>floor</span>(<span style='color:darkgreen'>random</span>() * <span style='color:darkgreen'>n</span>)] <span style='color:blueviolet'>for</span> <span style='color:darkgreen'>i</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>_repeat</span>(<span style='color:blueviolet'>None</span>, <span style='color:darkgreen'>k</span>)]
            <span style='color:blueviolet'>try</span>:
                <span style='color:darkgreen'>cum_weights</span> = <span style='color:darkgreen'>list</span>(<span style='color:darkgreen'>_accumulate</span>(<span style='color:darkgreen'>weights</span>))
            <span style='color:blueviolet'>except</span> <span style='color:darkgreen'>TypeError</span>:
                <span style='color:blueviolet'>if</span> <span style='color:blueviolet'>not</span> <span style='color:darkgreen'>isinstance</span>(<span style='color:darkgreen'>weights</span>, <span style='color:darkgreen'>int</span>):
                    <span style='color:blueviolet'>raise</span>
                <span style='color:darkgreen'>k</span> = <span style='color:darkgreen'>weights</span>
                <span style='color:blueviolet'>raise</span> <span style='color:darkgreen'>TypeError</span>(
                    <span style='color:crimson'>f'The number of choices must be a keyword argument: {k=}'</span>
                ) <span style='color:blueviolet'>from</span> <span style='color:blueviolet'>None</span>
        <span style='color:blueviolet'>elif</span> <span style='color:darkgreen'>weights</span> <span style='color:blueviolet'>is</span> <span style='color:blueviolet'>not</span> <span style='color:blueviolet'>None</span>:
            <span style='color:blueviolet'>raise</span> <span style='color:darkgreen'>TypeError</span>(<span style='color:crimson'>'Cannot specify both weights and cumulative weights'</span>)
        <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>len</span>(<span style='color:darkgreen'>cum_weights</span>) != <span style='color:darkgreen'>n</span>:
            <span style='color:blueviolet'>raise</span> <span style='color:darkgreen'>ValueError</span>(<span style='color:crimson'>'The number of weights does not match the population'</span>)
        <span style='color:darkgreen'>total</span> = <span style='color:darkgreen'>cum_weights</span>[-1] + 0.0   <span style='color:darkblue'># convert to float</span>
        <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>total</span> <= 0.0:
            <span style='color:blueviolet'>raise</span> <span style='color:darkgreen'>ValueError</span>(<span style='color:crimson'>'Total of weights must be greater than zero'</span>)
        <span style='color:blueviolet'>if</span> <span style='color:blueviolet'>not</span> <span style='color:darkgreen'>_isfinite</span>(<span style='color:darkgreen'>total</span>):
            <span style='color:blueviolet'>raise</span> <span style='color:darkgreen'>ValueError</span>(<span style='color:crimson'>'Total of weights must be finite'</span>)
        <span style='color:darkgreen'>bisect</span> = <span style='color:darkgreen'>_bisect</span>
        <span style='color:darkgreen'>hi</span> = <span style='color:darkgreen'>n</span> - 1
        <span style='color:blueviolet'>return</span> [<span style='color:darkgreen'>population</span>[<span style='color:darkgreen'>bisect</span>(<span style='color:darkgreen'>cum_weights</span>, <span style='color:darkgreen'>random</span>() * <span style='color:darkgreen'>total</span>, 0, <span style='color:darkgreen'>hi</span>)]
                <span style='color:blueviolet'>for</span> <span style='color:darkgreen'>i</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>_repeat</span>(<span style='color:blueviolet'>None</span>, <span style='color:darkgreen'>k</span>)]


    <span style='color:darkblue'>## -------------------- real-valued distributions  -------------------</span>

    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>uniform</span>(<span style='color:darkgreen'>self</span>, <span style='color:darkgreen'>a</span>, <span style='color:darkgreen'>b</span>):
        <span style='color:crimson'>"Get a random number in the range [a, b) or [a, b] depending on rounding."</span>
        <span style='color:blueviolet'>return</span> <span style='color:darkgreen'>a</span> + (<span style='color:darkgreen'>b</span> - <span style='color:darkgreen'>a</span>) * <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>random</span>()

    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>triangular</span>(<span style='color:darkgreen'>self</span>, <span style='color:darkgreen'>low</span>=0.0, <span style='color:darkgreen'>high</span>=1.0, <span style='color:darkgreen'>mode</span>=<span style='color:blueviolet'>None</span>):
        <span style='color:crimson'>"""Triangular distribution.
        Continuous distribution bounded by given lower and upper limits,
        and having a given mode value in-between.
        http://en.wikipedia.org/wiki/Triangular_distribution
        """</span>
        <span style='color:darkgreen'>u</span> = <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>random</span>()
        <span style='color:blueviolet'>try</span>:
            <span style='color:darkgreen'>c</span> = 0.5 <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>mode</span> <span style='color:blueviolet'>is</span> <span style='color:blueviolet'>None</span> <span style='color:blueviolet'>else</span> (<span style='color:darkgreen'>mode</span> - <span style='color:darkgreen'>low</span>) / (<span style='color:darkgreen'>high</span> - <span style='color:darkgreen'>low</span>)
        <span style='color:blueviolet'>except</span> <span style='color:darkgreen'>ZeroDivisionError</span>:
            <span style='color:blueviolet'>return</span> <span style='color:darkgreen'>low</span>
        <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>u</span> > <span style='color:darkgreen'>c</span>:
            <span style='color:darkgreen'>u</span> = 1.0 - <span style='color:darkgreen'>u</span>
            <span style='color:darkgreen'>c</span> = 1.0 - <span style='color:darkgreen'>c</span>
            <span style='color:darkgreen'>low</span>, <span style='color:darkgreen'>high</span> = <span style='color:darkgreen'>high</span>, <span style='color:darkgreen'>low</span>
        <span style='color:blueviolet'>return</span> <span style='color:darkgreen'>low</span> + (<span style='color:darkgreen'>high</span> - <span style='color:darkgreen'>low</span>) * <span style='color:darkgreen'>_sqrt</span>(<span style='color:darkgreen'>u</span> * <span style='color:darkgreen'>c</span>)

    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>normalvariate</span>(<span style='color:darkgreen'>self</span>, <span style='color:darkgreen'>mu</span>, <span style='color:darkgreen'>sigma</span>):
        <span style='color:crimson'>"""Normal distribution.
        mu is the mean, and sigma is the standard deviation.
        """</span>
        <span style='color:darkblue'># Uses Kinderman and Monahan method. Reference: Kinderman,</span>
        <span style='color:darkblue'># A.J. and Monahan, J.F., "Computer generation of random</span>
        <span style='color:darkblue'># variables using the ratio of uniform deviates", ACM Trans</span>
        <span style='color:darkblue'># Math Software, 3, (1977), pp257-260.</span>

        <span style='color:darkgreen'>random</span> = <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>random</span>
        <span style='color:blueviolet'>while</span> <span style='color:blueviolet'>True</span>:
            <span style='color:darkgreen'>u1</span> = <span style='color:darkgreen'>random</span>()
            <span style='color:darkgreen'>u2</span> = 1.0 - <span style='color:darkgreen'>random</span>()
            <span style='color:darkgreen'>z</span> = <span style='color:darkgreen'>NV_MAGICCONST</span> * (<span style='color:darkgreen'>u1</span> - 0.5) / <span style='color:darkgreen'>u2</span>
            <span style='color:darkgreen'>zz</span> = <span style='color:darkgreen'>z</span> * <span style='color:darkgreen'>z</span> / 4.0
            <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>zz</span> <= -<span style='color:darkgreen'>_log</span>(<span style='color:darkgreen'>u2</span>):
                <span style='color:blueviolet'>break</span>
        <span style='color:blueviolet'>return</span> <span style='color:darkgreen'>mu</span> + <span style='color:darkgreen'>z</span> * <span style='color:darkgreen'>sigma</span>

    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>gauss</span>(<span style='color:darkgreen'>self</span>, <span style='color:darkgreen'>mu</span>, <span style='color:darkgreen'>sigma</span>):
        <span style='color:crimson'>"""Gaussian distribution.
        mu is the mean, and sigma is the standard deviation.  This is
        slightly faster than the normalvariate() function.
        Not thread-safe without a lock around calls.
        """</span>
        <span style='color:darkblue'># When x and y are two variables from [0, 1), uniformly</span>
        <span style='color:darkblue'># distributed, then</span>
        <span style='color:darkblue'>#</span>
        <span style='color:darkblue'>#    cos(2*pi*x)*sqrt(-2*log(1-y))</span>
        <span style='color:darkblue'>#    sin(2*pi*x)*sqrt(-2*log(1-y))</span>
        <span style='color:darkblue'>#</span>
        <span style='color:darkblue'># are two *independent* variables with normal distribution</span>
        <span style='color:darkblue'># (mu = 0, sigma = 1).</span>
        <span style='color:darkblue'># (Lambert Meertens)</span>
        <span style='color:darkblue'># (corrected version; bug discovered by Mike Miller, fixed by LM)</span>

        <span style='color:darkblue'># Multithreading note: When two threads call this function</span>
        <span style='color:darkblue'># simultaneously, it is possible that they will receive the</span>
        <span style='color:darkblue'># same return value.  The window is very small though.  To</span>
        <span style='color:darkblue'># avoid this, you have to use a lock around all calls.  (I</span>
        <span style='color:darkblue'># didn't want to slow this down in the serial case by using a</span>
        <span style='color:darkblue'># lock here.)</span>

        <span style='color:darkgreen'>random</span> = <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>random</span>
        <span style='color:darkgreen'>z</span> = <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>gauss_next</span>
        <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>gauss_next</span> = <span style='color:blueviolet'>None</span>
        <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>z</span> <span style='color:blueviolet'>is</span> <span style='color:blueviolet'>None</span>:
            <span style='color:darkgreen'>x2pi</span> = <span style='color:darkgreen'>random</span>() * <span style='color:darkgreen'>TWOPI</span>
            <span style='color:darkgreen'>g2rad</span> = <span style='color:darkgreen'>_sqrt</span>(-2.0 * <span style='color:darkgreen'>_log</span>(1.0 - <span style='color:darkgreen'>random</span>()))
            <span style='color:darkgreen'>z</span> = <span style='color:darkgreen'>_cos</span>(<span style='color:darkgreen'>x2pi</span>) * <span style='color:darkgreen'>g2rad</span>
            <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>gauss_next</span> = <span style='color:darkgreen'>_sin</span>(<span style='color:darkgreen'>x2pi</span>) * <span style='color:darkgreen'>g2rad</span>

        <span style='color:blueviolet'>return</span> <span style='color:darkgreen'>mu</span> + <span style='color:darkgreen'>z</span> * <span style='color:darkgreen'>sigma</span>

    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>lognormvariate</span>(<span style='color:darkgreen'>self</span>, <span style='color:darkgreen'>mu</span>, <span style='color:darkgreen'>sigma</span>):
        <span style='color:crimson'>"""Log normal distribution.
        If you take the natural logarithm of this distribution, you'll get a
        normal distribution with mean mu and standard deviation sigma.
        mu can have any value, and sigma must be greater than zero.
        """</span>
        <span style='color:blueviolet'>return</span> <span style='color:darkgreen'>_exp</span>(<span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>normalvariate</span>(<span style='color:darkgreen'>mu</span>, <span style='color:darkgreen'>sigma</span>))

    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>expovariate</span>(<span style='color:darkgreen'>self</span>, <span style='color:darkgreen'>lambd</span>):
        <span style='color:crimson'>"""Exponential distribution.
        lambd is 1.0 divided by the desired mean.  It should be
        nonzero.  (The parameter would be called "lambda", but that is
        a reserved word in Python.)  Returned values range from 0 to
        positive infinity if lambd is positive, and from negative
        infinity to 0 if lambd is negative.
        """</span>
        <span style='color:darkblue'># lambd: rate lambd = 1/mean</span>
        <span style='color:darkblue'># ('lambda' is a Python reserved word)</span>

        <span style='color:darkblue'># we use 1-random() instead of random() to preclude the</span>
        <span style='color:darkblue'># possibility of taking the log of zero.</span>
        <span style='color:blueviolet'>return</span> -<span style='color:darkgreen'>_log</span>(1.0 - <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>random</span>()) / <span style='color:darkgreen'>lambd</span>

    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>vonmisesvariate</span>(<span style='color:darkgreen'>self</span>, <span style='color:darkgreen'>mu</span>, <span style='color:darkgreen'>kappa</span>):
        <span style='color:crimson'>"""Circular data distribution.
        mu is the mean angle, expressed in radians between 0 and 2*pi, and
        kappa is the concentration parameter, which must be greater than or
        equal to zero.  If kappa is equal to zero, this distribution reduces
        to a uniform random angle over the range 0 to 2*pi.
        """</span>
        <span style='color:darkblue'># Based upon an algorithm published in: Fisher, N.I.,</span>
        <span style='color:darkblue'># "Statistical Analysis of Circular Data", Cambridge</span>
        <span style='color:darkblue'># University Press, 1993.</span>

        <span style='color:darkblue'># Thanks to Magnus Kessler for a correction to the</span>
        <span style='color:darkblue'># implementation of step 4.</span>

        <span style='color:darkgreen'>random</span> = <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>random</span>
        <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>kappa</span> <= 1e-6:
            <span style='color:blueviolet'>return</span> <span style='color:darkgreen'>TWOPI</span> * <span style='color:darkgreen'>random</span>()

        <span style='color:darkgreen'>s</span> = 0.5 / <span style='color:darkgreen'>kappa</span>
        <span style='color:darkgreen'>r</span> = <span style='color:darkgreen'>s</span> + <span style='color:darkgreen'>_sqrt</span>(1.0 + <span style='color:darkgreen'>s</span> * <span style='color:darkgreen'>s</span>)

        <span style='color:blueviolet'>while</span> <span style='color:blueviolet'>True</span>:
            <span style='color:darkgreen'>u1</span> = <span style='color:darkgreen'>random</span>()
            <span style='color:darkgreen'>z</span> = <span style='color:darkgreen'>_cos</span>(<span style='color:darkgreen'>_pi</span> * <span style='color:darkgreen'>u1</span>)

            <span style='color:darkgreen'>d</span> = <span style='color:darkgreen'>z</span> / (<span style='color:darkgreen'>r</span> + <span style='color:darkgreen'>z</span>)
            <span style='color:darkgreen'>u2</span> = <span style='color:darkgreen'>random</span>()
            <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>u2</span> < 1.0 - <span style='color:darkgreen'>d</span> * <span style='color:darkgreen'>d</span> <span style='color:blueviolet'>or</span> <span style='color:darkgreen'>u2</span> <= (1.0 - <span style='color:darkgreen'>d</span>) * <span style='color:darkgreen'>_exp</span>(<span style='color:darkgreen'>d</span>):
                <span style='color:blueviolet'>break</span>

        <span style='color:darkgreen'>q</span> = 1.0 / <span style='color:darkgreen'>r</span>
        <span style='color:darkgreen'>f</span> = (<span style='color:darkgreen'>q</span> + <span style='color:darkgreen'>z</span>) / (1.0 + <span style='color:darkgreen'>q</span> * <span style='color:darkgreen'>z</span>)
        <span style='color:darkgreen'>u3</span> = <span style='color:darkgreen'>random</span>()
        <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>u3</span> > 0.5:
            <span style='color:darkgreen'>theta</span> = (<span style='color:darkgreen'>mu</span> + <span style='color:darkgreen'>_acos</span>(<span style='color:darkgreen'>f</span>)) % <span style='color:darkgreen'>TWOPI</span>
        <span style='color:blueviolet'>else</span>:
            <span style='color:darkgreen'>theta</span> = (<span style='color:darkgreen'>mu</span> - <span style='color:darkgreen'>_acos</span>(<span style='color:darkgreen'>f</span>)) % <span style='color:darkgreen'>TWOPI</span>

        <span style='color:blueviolet'>return</span> <span style='color:darkgreen'>theta</span>

    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>gammavariate</span>(<span style='color:darkgreen'>self</span>, <span style='color:darkgreen'>alpha</span>, <span style='color:darkgreen'>beta</span>):
        <span style='color:crimson'>"""Gamma distribution.  Not the gamma function!
        Conditions on the parameters are alpha > 0 and beta > 0.
        The probability distribution function is:
                    x ** (alpha - 1) * math.exp(-x / beta)
          pdf(x) =  --------------------------------------
                      math.gamma(alpha) * beta ** alpha
        """</span>
        <span style='color:darkblue'># alpha > 0, beta > 0, mean is alpha*beta, variance is alpha*beta**2</span>

        <span style='color:darkblue'># Warning: a few older sources define the gamma distribution in terms</span>
        <span style='color:darkblue'># of alpha > -1.0</span>
        <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>alpha</span> <= 0.0 <span style='color:blueviolet'>or</span> <span style='color:darkgreen'>beta</span> <= 0.0:
            <span style='color:blueviolet'>raise</span> <span style='color:darkgreen'>ValueError</span>(<span style='color:crimson'>'gammavariate: alpha and beta must be > 0.0'</span>)

        <span style='color:darkgreen'>random</span> = <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>random</span>
        <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>alpha</span> > 1.0:

            <span style='color:darkblue'># Uses R.C.H. Cheng, "The generation of Gamma</span>
            <span style='color:darkblue'># variables with non-integral shape parameters",</span>
            <span style='color:darkblue'># Applied Statistics, (1977), 26, No. 1, p71-74</span>

            <span style='color:darkgreen'>ainv</span> = <span style='color:darkgreen'>_sqrt</span>(2.0 * <span style='color:darkgreen'>alpha</span> - 1.0)
            <span style='color:darkgreen'>bbb</span> = <span style='color:darkgreen'>alpha</span> - <span style='color:darkgreen'>LOG4</span>
            <span style='color:darkgreen'>ccc</span> = <span style='color:darkgreen'>alpha</span> + <span style='color:darkgreen'>ainv</span>

            <span style='color:blueviolet'>while</span> <span style='color:blueviolet'>True</span>:
                <span style='color:darkgreen'>u1</span> = <span style='color:darkgreen'>random</span>()
                <span style='color:blueviolet'>if</span> <span style='color:blueviolet'>not</span> 1e-7 < <span style='color:darkgreen'>u1</span> < 0.9999999:
                    <span style='color:blueviolet'>continue</span>
                <span style='color:darkgreen'>u2</span> = 1.0 - <span style='color:darkgreen'>random</span>()
                <span style='color:darkgreen'>v</span> = <span style='color:darkgreen'>_log</span>(<span style='color:darkgreen'>u1</span> / (1.0 - <span style='color:darkgreen'>u1</span>)) / <span style='color:darkgreen'>ainv</span>
                <span style='color:darkgreen'>x</span> = <span style='color:darkgreen'>alpha</span> * <span style='color:darkgreen'>_exp</span>(<span style='color:darkgreen'>v</span>)
                <span style='color:darkgreen'>z</span> = <span style='color:darkgreen'>u1</span> * <span style='color:darkgreen'>u1</span> * <span style='color:darkgreen'>u2</span>
                <span style='color:darkgreen'>r</span> = <span style='color:darkgreen'>bbb</span> + <span style='color:darkgreen'>ccc</span> * <span style='color:darkgreen'>v</span> - <span style='color:darkgreen'>x</span>
                <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>r</span> + <span style='color:darkgreen'>SG_MAGICCONST</span> - 4.5 * <span style='color:darkgreen'>z</span> >= 0.0 <span style='color:blueviolet'>or</span> <span style='color:darkgreen'>r</span> >= <span style='color:darkgreen'>_log</span>(<span style='color:darkgreen'>z</span>):
                    <span style='color:blueviolet'>return</span> <span style='color:darkgreen'>x</span> * <span style='color:darkgreen'>beta</span>

        <span style='color:blueviolet'>elif</span> <span style='color:darkgreen'>alpha</span> == 1.0:
            <span style='color:darkblue'># expovariate(1/beta)</span>
            <span style='color:blueviolet'>return</span> -<span style='color:darkgreen'>_log</span>(1.0 - <span style='color:darkgreen'>random</span>()) * <span style='color:darkgreen'>beta</span>

        <span style='color:blueviolet'>else</span>:
            <span style='color:darkblue'># alpha is between 0 and 1 (exclusive)</span>
            <span style='color:darkblue'># Uses ALGORITHM GS of Statistical Computing - Kennedy & Gentle</span>
            <span style='color:blueviolet'>while</span> <span style='color:blueviolet'>True</span>:
                <span style='color:darkgreen'>u</span> = <span style='color:darkgreen'>random</span>()
                <span style='color:darkgreen'>b</span> = (<span style='color:darkgreen'>_e</span> + <span style='color:darkgreen'>alpha</span>) / <span style='color:darkgreen'>_e</span>
                <span style='color:darkgreen'>p</span> = <span style='color:darkgreen'>b</span> * <span style='color:darkgreen'>u</span>
                <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>p</span> <= 1.0:
                    <span style='color:darkgreen'>x</span> = <span style='color:darkgreen'>p</span> ** (1.0 / <span style='color:darkgreen'>alpha</span>)
                <span style='color:blueviolet'>else</span>:
                    <span style='color:darkgreen'>x</span> = -<span style='color:darkgreen'>_log</span>((<span style='color:darkgreen'>b</span> - <span style='color:darkgreen'>p</span>) / <span style='color:darkgreen'>alpha</span>)
                <span style='color:darkgreen'>u1</span> = <span style='color:darkgreen'>random</span>()
                <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>p</span> > 1.0:
                    <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>u1</span> <= <span style='color:darkgreen'>x</span> ** (<span style='color:darkgreen'>alpha</span> - 1.0):
                        <span style='color:blueviolet'>break</span>
                <span style='color:blueviolet'>elif</span> <span style='color:darkgreen'>u1</span> <= <span style='color:darkgreen'>_exp</span>(-<span style='color:darkgreen'>x</span>):
                    <span style='color:blueviolet'>break</span>
            <span style='color:blueviolet'>return</span> <span style='color:darkgreen'>x</span> * <span style='color:darkgreen'>beta</span>

    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>betavariate</span>(<span style='color:darkgreen'>self</span>, <span style='color:darkgreen'>alpha</span>, <span style='color:darkgreen'>beta</span>):
        <span style='color:crimson'>"""Beta distribution.
        Conditions on the parameters are alpha > 0 and beta > 0.
        Returned values range between 0 and 1.
        """</span>
        <span style='color:darkblue'>## See</span>
        <span style='color:darkblue'>## http://mail.python.org/pipermail/python-bugs-list/2001-January/003752.html</span>
        <span style='color:darkblue'>## for Ivan Frohne's insightful analysis of why the original implementation:</span>
        <span style='color:darkblue'>##</span>
        <span style='color:darkblue'>##    def betavariate(self, alpha, beta):</span>
        <span style='color:darkblue'>##        # Discrete Event Simulation in C, pp 87-88.</span>
        <span style='color:darkblue'>##</span>
        <span style='color:darkblue'>##        y = self.expovariate(alpha)</span>
        <span style='color:darkblue'>##        z = self.expovariate(1.0/beta)</span>
        <span style='color:darkblue'>##        return z/(y+z)</span>
        <span style='color:darkblue'>##</span>
        <span style='color:darkblue'>## was dead wrong, and how it probably got that way.</span>

        <span style='color:darkblue'># This version due to Janne Sinkkonen, and matches all the std</span>
        <span style='color:darkblue'># texts (e.g., Knuth Vol 2 Ed 3 pg 134 "the beta distribution").</span>
        <span style='color:darkgreen'>y</span> = <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>gammavariate</span>(<span style='color:darkgreen'>alpha</span>, 1.0)
        <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>y</span>:
            <span style='color:blueviolet'>return</span> <span style='color:darkgreen'>y</span> / (<span style='color:darkgreen'>y</span> + <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>gammavariate</span>(<span style='color:darkgreen'>beta</span>, 1.0))
        <span style='color:blueviolet'>return</span> 0.0

    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>paretovariate</span>(<span style='color:darkgreen'>self</span>, <span style='color:darkgreen'>alpha</span>):
        <span style='color:crimson'>"""Pareto distribution.  alpha is the shape parameter."""</span>
        <span style='color:darkblue'># Jain, pg. 495</span>

        <span style='color:darkgreen'>u</span> = 1.0 - <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>random</span>()
        <span style='color:blueviolet'>return</span> <span style='color:darkgreen'>u</span> ** (-1.0 / <span style='color:darkgreen'>alpha</span>)

    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>weibullvariate</span>(<span style='color:darkgreen'>self</span>, <span style='color:darkgreen'>alpha</span>, <span style='color:darkgreen'>beta</span>):
        <span style='color:crimson'>"""Weibull distribution.
        alpha is the scale parameter and beta is the shape parameter.
        """</span>
        <span style='color:darkblue'># Jain, pg. 499; bug fix courtesy Bill Arms</span>

        <span style='color:darkgreen'>u</span> = 1.0 - <span style='color:darkgreen'>self</span>.<span style='color:darkgreen'>random</span>()
        <span style='color:blueviolet'>return</span> <span style='color:darkgreen'>alpha</span> * (-<span style='color:darkgreen'>_log</span>(<span style='color:darkgreen'>u</span>)) ** (1.0 / <span style='color:darkgreen'>beta</span>)


<span style='color:darkblue'>## ------------------------------------------------------------------</span>
<span style='color:darkblue'>## --------------- Operating System Random Source  ------------------</span>


<span style='color:blueviolet'>class</span> <span style='color:darkgreen'>SystemRandom</span>(<span style='color:darkgreen'>Random</span>):
    <span style='color:crimson'>"""Alternate random number generator using sources provided
    by the operating system (such as /dev/urandom on Unix or
    CryptGenRandom on Windows).
     Not available on all systems (see os.urandom() for details).
    """</span>

    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>random</span>(<span style='color:darkgreen'>self</span>):
        <span style='color:crimson'>"""Get the next random number in the range [0.0, 1.0)."""</span>
        <span style='color:blueviolet'>return</span> (<span style='color:darkgreen'>int</span>.<span style='color:darkgreen'>from_bytes</span>(<span style='color:darkgreen'>_urandom</span>(7), <span style='color:crimson'>'big'</span>) >> 3) * <span style='color:darkgreen'>RECIP_BPF</span>

    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>getrandbits</span>(<span style='color:darkgreen'>self</span>, <span style='color:darkgreen'>k</span>):
        <span style='color:crimson'>"""getrandbits(k) -> x.  Generates an int with k random bits."""</span>
        <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>k</span> < 0:
            <span style='color:blueviolet'>raise</span> <span style='color:darkgreen'>ValueError</span>(<span style='color:crimson'>'number of bits must be non-negative'</span>)
        <span style='color:darkgreen'>numbytes</span> = (<span style='color:darkgreen'>k</span> + 7) // 8                       <span style='color:darkblue'># bits / 8 and rounded up</span>
        <span style='color:darkgreen'>x</span> = <span style='color:darkgreen'>int</span>.<span style='color:darkgreen'>from_bytes</span>(<span style='color:darkgreen'>_urandom</span>(<span style='color:darkgreen'>numbytes</span>), <span style='color:crimson'>'big'</span>)
        <span style='color:blueviolet'>return</span> <span style='color:darkgreen'>x</span> >> (<span style='color:darkgreen'>numbytes</span> * 8 - <span style='color:darkgreen'>k</span>)                <span style='color:darkblue'># trim excess bits</span>

    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>randbytes</span>(<span style='color:darkgreen'>self</span>, <span style='color:darkgreen'>n</span>):
        <span style='color:crimson'>"""Generate n random bytes."""</span>
        <span style='color:darkblue'># os.urandom(n) fails with ValueError for n < 0</span>
        <span style='color:darkblue'># and returns an empty bytes string for n == 0.</span>
        <span style='color:blueviolet'>return</span> <span style='color:darkgreen'>_urandom</span>(<span style='color:darkgreen'>n</span>)

    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>seed</span>(<span style='color:darkgreen'>self</span>, *<span style='color:darkgreen'>args</span>, **<span style='color:darkgreen'>kwds</span>):
        <span style='color:crimson'>"Stub method.  Not used for a system random number generator."</span>
        <span style='color:blueviolet'>return</span> <span style='color:blueviolet'>None</span>

    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>_notimplemented</span>(<span style='color:darkgreen'>self</span>, *<span style='color:darkgreen'>args</span>, **<span style='color:darkgreen'>kwds</span>):
        <span style='color:crimson'>"Method should not be called for a system random number generator."</span>
        <span style='color:blueviolet'>raise</span> <span style='color:darkgreen'>NotImplementedError</span>(<span style='color:crimson'>'System entropy source does not have state.'</span>)
    <span style='color:darkgreen'>getstate</span> = <span style='color:darkgreen'>setstate</span> = <span style='color:darkgreen'>_notimplemented</span>


<span style='color:darkblue'># ----------------------------------------------------------------------</span>
<span style='color:darkblue'># Create one instance, seeded from current time, and export its methods</span>
<span style='color:darkblue'># as module-level functions.  The functions share state across all uses</span>
<span style='color:darkblue'># (both in the user's code and in the Python libraries), but that's fine</span>
<span style='color:darkblue'># for most programs and is easier for the casual user than making them</span>
<span style='color:darkblue'># instantiate their own Random() instance.</span>

<span style='color:darkgreen'>_inst</span> = <span style='color:darkgreen'>Random</span>()
<span style='color:darkgreen'>seed</span> = <span style='color:darkgreen'>_inst</span>.<span style='color:darkgreen'>seed</span>
<span style='color:darkgreen'>random</span> = <span style='color:darkgreen'>_inst</span>.<span style='color:darkgreen'>random</span>
<span style='color:darkgreen'>uniform</span> = <span style='color:darkgreen'>_inst</span>.<span style='color:darkgreen'>uniform</span>
<span style='color:darkgreen'>triangular</span> = <span style='color:darkgreen'>_inst</span>.<span style='color:darkgreen'>triangular</span>
<span style='color:darkgreen'>randint</span> = <span style='color:darkgreen'>_inst</span>.<span style='color:darkgreen'>randint</span>
<span style='color:darkgreen'>choice</span> = <span style='color:darkgreen'>_inst</span>.<span style='color:darkgreen'>choice</span>
<span style='color:darkgreen'>randrange</span> = <span style='color:darkgreen'>_inst</span>.<span style='color:darkgreen'>randrange</span>
<span style='color:darkgreen'>sample</span> = <span style='color:darkgreen'>_inst</span>.<span style='color:darkgreen'>sample</span>
<span style='color:darkgreen'>shuffle</span> = <span style='color:darkgreen'>_inst</span>.<span style='color:darkgreen'>shuffle</span>
<span style='color:darkgreen'>choices</span> = <span style='color:darkgreen'>_inst</span>.<span style='color:darkgreen'>choices</span>
<span style='color:darkgreen'>normalvariate</span> = <span style='color:darkgreen'>_inst</span>.<span style='color:darkgreen'>normalvariate</span>
<span style='color:darkgreen'>lognormvariate</span> = <span style='color:darkgreen'>_inst</span>.<span style='color:darkgreen'>lognormvariate</span>
<span style='color:darkgreen'>expovariate</span> = <span style='color:darkgreen'>_inst</span>.<span style='color:darkgreen'>expovariate</span>
<span style='color:darkgreen'>vonmisesvariate</span> = <span style='color:darkgreen'>_inst</span>.<span style='color:darkgreen'>vonmisesvariate</span>
<span style='color:darkgreen'>gammavariate</span> = <span style='color:darkgreen'>_inst</span>.<span style='color:darkgreen'>gammavariate</span>
<span style='color:darkgreen'>gauss</span> = <span style='color:darkgreen'>_inst</span>.<span style='color:darkgreen'>gauss</span>
<span style='color:darkgreen'>betavariate</span> = <span style='color:darkgreen'>_inst</span>.<span style='color:darkgreen'>betavariate</span>
<span style='color:darkgreen'>paretovariate</span> = <span style='color:darkgreen'>_inst</span>.<span style='color:darkgreen'>paretovariate</span>
<span style='color:darkgreen'>weibullvariate</span> = <span style='color:darkgreen'>_inst</span>.<span style='color:darkgreen'>weibullvariate</span>
<span style='color:darkgreen'>getstate</span> = <span style='color:darkgreen'>_inst</span>.<span style='color:darkgreen'>getstate</span>
<span style='color:darkgreen'>setstate</span> = <span style='color:darkgreen'>_inst</span>.<span style='color:darkgreen'>setstate</span>
<span style='color:darkgreen'>getrandbits</span> = <span style='color:darkgreen'>_inst</span>.<span style='color:darkgreen'>getrandbits</span>
<span style='color:darkgreen'>randbytes</span> = <span style='color:darkgreen'>_inst</span>.<span style='color:darkgreen'>randbytes</span>


<span style='color:darkblue'>## ------------------------------------------------------</span>
<span style='color:darkblue'>## ----------------- test program -----------------------</span>

<span style='color:blueviolet'>def</span> <span style='color:darkgreen'>_test_generator</span>(<span style='color:darkgreen'>n</span>, <span style='color:darkgreen'>func</span>, <span style='color:darkgreen'>args</span>):
    <span style='color:blueviolet'>from</span> <span style='color:darkgreen'>statistics</span> <span style='color:blueviolet'>import</span> <span style='color:darkgreen'>stdev</span>, <span style='color:darkgreen'>fmean</span> <span style='color:blueviolet'>as</span> <span style='color:darkgreen'>mean</span>
    <span style='color:blueviolet'>from</span> <span style='color:darkgreen'>time</span> <span style='color:blueviolet'>import</span> <span style='color:darkgreen'>perf_counter</span>

    <span style='color:darkgreen'>t0</span> = <span style='color:darkgreen'>perf_counter</span>()
    <span style='color:darkgreen'>data</span> = [<span style='color:darkgreen'>func</span>(*<span style='color:darkgreen'>args</span>) <span style='color:blueviolet'>for</span> <span style='color:darkgreen'>i</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>_repeat</span>(<span style='color:blueviolet'>None</span>, <span style='color:darkgreen'>n</span>)]
    <span style='color:darkgreen'>t1</span> = <span style='color:darkgreen'>perf_counter</span>()

    <span style='color:darkgreen'>xbar</span> = <span style='color:darkgreen'>mean</span>(<span style='color:darkgreen'>data</span>)
    <span style='color:darkgreen'>sigma</span> = <span style='color:darkgreen'>stdev</span>(<span style='color:darkgreen'>data</span>, <span style='color:darkgreen'>xbar</span>)
    <span style='color:darkgreen'>low</span> = <span style='color:darkgreen'>min</span>(<span style='color:darkgreen'>data</span>)
    <span style='color:darkgreen'>high</span> = <span style='color:darkgreen'>max</span>(<span style='color:darkgreen'>data</span>)

    <span style='color:darkgreen'>print</span>(<span style='color:crimson'>f'{t1 - t0:.3f} sec, {n} times {func.__name__}'</span>)
    <span style='color:darkgreen'>print</span>(<span style='color:crimson'>'avg %g, stddev %g, min %g, max %g\n'</span> % (<span style='color:darkgreen'>xbar</span>, <span style='color:darkgreen'>sigma</span>, <span style='color:darkgreen'>low</span>, <span style='color:darkgreen'>high</span>))


<span style='color:blueviolet'>def</span> <span style='color:darkgreen'>_test</span>(<span style='color:darkgreen'>N</span>=2000):
    <span style='color:darkgreen'>_test_generator</span>(<span style='color:darkgreen'>N</span>, <span style='color:darkgreen'>random</span>, ())
    <span style='color:darkgreen'>_test_generator</span>(<span style='color:darkgreen'>N</span>, <span style='color:darkgreen'>normalvariate</span>, (0.0, 1.0))
    <span style='color:darkgreen'>_test_generator</span>(<span style='color:darkgreen'>N</span>, <span style='color:darkgreen'>lognormvariate</span>, (0.0, 1.0))
    <span style='color:darkgreen'>_test_generator</span>(<span style='color:darkgreen'>N</span>, <span style='color:darkgreen'>vonmisesvariate</span>, (0.0, 1.0))
    <span style='color:darkgreen'>_test_generator</span>(<span style='color:darkgreen'>N</span>, <span style='color:darkgreen'>gammavariate</span>, (0.01, 1.0))
    <span style='color:darkgreen'>_test_generator</span>(<span style='color:darkgreen'>N</span>, <span style='color:darkgreen'>gammavariate</span>, (0.1, 1.0))
    <span style='color:darkgreen'>_test_generator</span>(<span style='color:darkgreen'>N</span>, <span style='color:darkgreen'>gammavariate</span>, (0.1, 2.0))
    <span style='color:darkgreen'>_test_generator</span>(<span style='color:darkgreen'>N</span>, <span style='color:darkgreen'>gammavariate</span>, (0.5, 1.0))
    <span style='color:darkgreen'>_test_generator</span>(<span style='color:darkgreen'>N</span>, <span style='color:darkgreen'>gammavariate</span>, (0.9, 1.0))
    <span style='color:darkgreen'>_test_generator</span>(<span style='color:darkgreen'>N</span>, <span style='color:darkgreen'>gammavariate</span>, (1.0, 1.0))
    <span style='color:darkgreen'>_test_generator</span>(<span style='color:darkgreen'>N</span>, <span style='color:darkgreen'>gammavariate</span>, (2.0, 1.0))
    <span style='color:darkgreen'>_test_generator</span>(<span style='color:darkgreen'>N</span>, <span style='color:darkgreen'>gammavariate</span>, (20.0, 1.0))
    <span style='color:darkgreen'>_test_generator</span>(<span style='color:darkgreen'>N</span>, <span style='color:darkgreen'>gammavariate</span>, (200.0, 1.0))
    <span style='color:darkgreen'>_test_generator</span>(<span style='color:darkgreen'>N</span>, <span style='color:darkgreen'>gauss</span>, (0.0, 1.0))
    <span style='color:darkgreen'>_test_generator</span>(<span style='color:darkgreen'>N</span>, <span style='color:darkgreen'>betavariate</span>, (3.0, 3.0))
    <span style='color:darkgreen'>_test_generator</span>(<span style='color:darkgreen'>N</span>, <span style='color:darkgreen'>triangular</span>, (0.0, 1.0, 1.0 / 3.0))


<span style='color:darkblue'>## ------------------------------------------------------</span>
<span style='color:darkblue'>## ------------------ fork support  ---------------------</span>

<span style='color:blueviolet'>if</span> <span style='color:darkgreen'>hasattr</span>(<span style='color:darkgreen'>_os</span>, <span style='color:crimson'>"fork"</span>):
    <span style='color:darkgreen'>_os</span>.<span style='color:darkgreen'>register_at_fork</span>(<span style='color:darkgreen'>after_in_child</span>=<span style='color:darkgreen'>_inst</span>.<span style='color:darkgreen'>seed</span>)


<span style='color:blueviolet'>if</span> <span style='color:darkgreen'>__name__</span> == <span style='color:crimson'>'__main__'</span>:
    <span style='color:darkgreen'>_test</span>()

        </pre>
    </body>
</html>