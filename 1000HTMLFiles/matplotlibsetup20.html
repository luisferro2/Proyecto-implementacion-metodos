<html>
    <head>
        <link rel="stylesheet" href="categorical-styles.css">
        <title>Documento de python resaltado</title>
    </head>
    <body>
        <pre><span style='color:crimson'>"""
The matplotlib build options can be modified with a setup.cfg file. See
setup.cfg.template for more information.
"""</span>

<span style='color:darkblue'># NOTE: This file must remain Python 2 compatible for the foreseeable future,</span>
<span style='color:darkblue'># to ensure that we error out properly for people with outdated setuptools</span>
<span style='color:darkblue'># and/or pip.</span>
<span style='color:blueviolet'>import</span> <span style='color:darkgreen'>sys</span>

<span style='color:darkgreen'>py_min_version</span> <span style='color:deepskyblue'>=</span> (<span style='color:turquoise'>3</span><span style='color:deepskyblue'>,</span> <span style='color:turquoise'>7</span><span style='color:deepskyblue'>)</span>  <span style='color:darkblue'># minimal supported python version</span>
<span style='color:darkgreen'>since_mpl_version</span> <span style='color:deepskyblue'>=</span> (<span style='color:turquoise'>3</span><span style='color:deepskyblue'>,</span> <span style='color:turquoise'>4</span><span style='color:deepskyblue'>)</span>  <span style='color:darkblue'># py_min_version is required since this mpl version</span>

<span style='color:blueviolet'>if</span> <span style='color:darkgreen'>sys</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>version_info</span> <span style='color:fuchsia'><</span> <span style='color:darkgreen'>py_min_version</span><span style='color:deepskyblue'>:</span>
    <span style='color:darkgreen'>error</span> <span style='color:deepskyblue'>=</span> <span style='color:crimson'>"""
Beginning with Matplotlib {0}, Python {1} or above is required.
You are using Python {2}.
This may be due to an out of date pip.
Make sure you have pip >= 9.0.1.
"""</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>format</span>(<span style='color:crimson'>'.'</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>join</span>(<span style='color:darkgreen'>str</span>(<span style='color:darkgreen'>n</span><span style='color:deepskyblue'>)</span> <span style='color:blueviolet'>for</span> <span style='color:darkgreen'>n</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>since_mpl_version</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>,</span>
           <span style='color:crimson'>'.'</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>join</span>(<span style='color:darkgreen'>str</span>(<span style='color:darkgreen'>n</span><span style='color:deepskyblue'>)</span> <span style='color:blueviolet'>for</span> <span style='color:darkgreen'>n</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>py_min_version</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>,</span>
           <span style='color:crimson'>'.'</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>join</span>(<span style='color:darkgreen'>str</span>(<span style='color:darkgreen'>n</span><span style='color:deepskyblue'>)</span> <span style='color:blueviolet'>for</span> <span style='color:darkgreen'>n</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>sys</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>version_info</span><span style='color:deepskyblue'>[</span><span style='color:deepskyblue'>:</span><span style='color:turquoise'>3</span><span style='color:deepskyblue'>]</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>)</span>
    <span style='color:darkgreen'>sys</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>exit</span>(<span style='color:darkgreen'>error</span><span style='color:deepskyblue'>)</span>

<span style='color:blueviolet'>import</span> <span style='color:darkgreen'>os</span>
<span style='color:blueviolet'>from</span> <span style='color:darkgreen'>pathlib</span> <span style='color:blueviolet'>import</span> <span style='color:darkgreen'>Path</span>
<span style='color:blueviolet'>import</span> <span style='color:darkgreen'>shutil</span>
<span style='color:blueviolet'>import</span> <span style='color:darkgreen'>subprocess</span>

<span style='color:blueviolet'>from</span> <span style='color:darkgreen'>setuptools</span> <span style='color:blueviolet'>import</span> <span style='color:darkgreen'>setup</span><span style='color:deepskyblue'>,</span> <span style='color:darkgreen'>find_packages</span><span style='color:deepskyblue'>,</span> <span style='color:darkgreen'>Extension</span>
<span style='color:blueviolet'>import</span> <span style='color:darkgreen'>setuptools</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>command</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>build_ext</span>
<span style='color:blueviolet'>import</span> <span style='color:darkgreen'>setuptools</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>command</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>build_py</span>
<span style='color:blueviolet'>import</span> <span style='color:darkgreen'>setuptools</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>command</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>test</span>
<span style='color:blueviolet'>import</span> <span style='color:darkgreen'>setuptools</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>command</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>sdist</span>

<span style='color:darkblue'># The setuptools version of sdist adds a setup.cfg file to the tree.</span>
<span style='color:darkblue'># We don't want that, so we simply remove it, and it will fall back to</span>
<span style='color:darkblue'># vanilla distutils.</span>
<span style='color:blueviolet'>del</span> <span style='color:darkgreen'>setuptools</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>command</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>sdist</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>sdist</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>make_release_tree</span>

<span style='color:blueviolet'>from</span> <span style='color:darkgreen'>distutils</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>errors</span> <span style='color:blueviolet'>import</span> <span style='color:darkgreen'>CompileError</span>
<span style='color:blueviolet'>from</span> <span style='color:darkgreen'>distutils</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>dist</span> <span style='color:blueviolet'>import</span> <span style='color:darkgreen'>Distribution</span>

<span style='color:blueviolet'>import</span> <span style='color:darkgreen'>setupext</span>
<span style='color:blueviolet'>from</span> <span style='color:darkgreen'>setupext</span> <span style='color:blueviolet'>import</span> <span style='color:darkgreen'>print_raw</span><span style='color:deepskyblue'>,</span> <span style='color:darkgreen'>print_status</span>


<span style='color:darkblue'># These are the packages in the order we want to display them.</span>
<span style='color:darkgreen'>mpl_packages</span> <span style='color:deepskyblue'>=</span> <span style='color:deepskyblue'>[</span>
    <span style='color:darkgreen'>setupext</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>Matplotlib</span>(<span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>,</span>
    <span style='color:darkgreen'>setupext</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>Python</span>(<span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>,</span>
    <span style='color:darkgreen'>setupext</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>Platform</span>(<span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>,</span>
    <span style='color:darkgreen'>setupext</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>FreeType</span>(<span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>,</span>
    <span style='color:darkgreen'>setupext</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>Qhull</span>(<span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>,</span>
    <span style='color:darkgreen'>setupext</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>Tests</span>(<span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>,</span>
    <span style='color:darkgreen'>setupext</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>BackendMacOSX</span>(<span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>,</span>
    <span style='color:deepskyblue'>]</span>


<span style='color:darkblue'># From https://bugs.python.org/issue26689</span>
<span style='color:blueviolet'>def</span> <span style='color:darkgreen'>has_flag</span>(<span style='color:darkgreen'>self</span><span style='color:deepskyblue'>,</span> <span style='color:darkgreen'>flagname</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>:</span>
    <span style='color:crimson'>"""Return whether a flag name is supported on the specified compiler."""</span>
    <span style='color:blueviolet'>import</span> <span style='color:darkgreen'>tempfile</span>
    <span style='color:blueviolet'>with</span> <span style='color:darkgreen'>tempfile</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>NamedTemporaryFile</span>(<span style='color:crimson'>'w'</span><span style='color:deepskyblue'>,</span> <span style='color:darkgreen'>suffix</span><span style='color:deepskyblue'>=</span><span style='color:crimson'>'.cpp'</span><span style='color:deepskyblue'>)</span> <span style='color:blueviolet'>as</span> <span style='color:darkgreen'>f</span><span style='color:deepskyblue'>:</span>
        <span style='color:darkgreen'>f</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>write</span>(<span style='color:crimson'>'int main (int argc, char **argv) { return 0; }'</span><span style='color:deepskyblue'>)</span>
        <span style='color:blueviolet'>try</span><span style='color:deepskyblue'>:</span>
            <span style='color:darkgreen'>self</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>compile</span>(<span style='color:deepskyblue'>[</span><span style='color:darkgreen'>f</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>name</span><span style='color:deepskyblue'>]</span><span style='color:deepskyblue'>,</span> <span style='color:darkgreen'>extra_postargs</span><span style='color:deepskyblue'>=</span><span style='color:deepskyblue'>[</span><span style='color:darkgreen'>flagname</span><span style='color:deepskyblue'>]</span><span style='color:deepskyblue'>)</span>
        <span style='color:blueviolet'>except</span> <span style='color:darkgreen'>CompileError</span><span style='color:deepskyblue'>:</span>
            <span style='color:blueviolet'>return</span> <span style='color:blueviolet'>False</span>
    <span style='color:blueviolet'>return</span> <span style='color:blueviolet'>True</span>


<span style='color:blueviolet'>class</span> <span style='color:darkgreen'>NoopTestCommand</span>(<span style='color:darkgreen'>setuptools</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>command</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>test</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>test</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>:</span>
    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>__init__</span>(<span style='color:darkgreen'>self</span><span style='color:deepskyblue'>,</span> <span style='color:darkgreen'>dist</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>:</span>
        <span style='color:darkgreen'>print</span>(<span style='color:crimson'>"Matplotlib does not support running tests with "</span>
              <span style='color:crimson'>"'python setup.py test'. Please run 'pytest'."</span><span style='color:deepskyblue'>)</span>


<span style='color:blueviolet'>class</span> <span style='color:darkgreen'>BuildExtraLibraries</span>(<span style='color:darkgreen'>setuptools</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>command</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>build_ext</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>build_ext</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>:</span>
    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>finalize_options</span>(<span style='color:darkgreen'>self</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>:</span>
        <span style='color:darkgreen'>self</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>distribution</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>ext_modules</span><span style='color:deepskyblue'>[</span><span style='color:deepskyblue'>:</span><span style='color:deepskyblue'>]</span> <span style='color:deepskyblue'>=</span> <span style='color:deepskyblue'>[</span>
            <span style='color:darkgreen'>ext</span>
            <span style='color:blueviolet'>for</span> <span style='color:darkgreen'>package</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>good_packages</span>
            <span style='color:blueviolet'>for</span> <span style='color:darkgreen'>ext</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>package</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>get_extensions</span>(<span style='color:deepskyblue'>)</span>
        <span style='color:deepskyblue'>]</span>
        <span style='color:darkgreen'>super</span>(<span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>finalize_options</span>(<span style='color:deepskyblue'>)</span>

    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>add_optimization_flags</span>(<span style='color:darkgreen'>self</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>:</span>
        <span style='color:crimson'>"""
        Add optional optimization flags to extension.
        This adds flags for LTO and hidden visibility to both compiled
        extensions, and to the environment variables so that vendored libraries
        will also use them. If the compiler does not support these flags, then
        none are added.
        """</span>

        <span style='color:darkgreen'>env</span> <span style='color:deepskyblue'>=</span> <span style='color:darkgreen'>os</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>environ</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>copy</span>(<span style='color:deepskyblue'>)</span>
        <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>sys</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>platform</span> <span style='color:deepskyblue'>=</span><span style='color:deepskyblue'>=</span> <span style='color:crimson'>'win32'</span><span style='color:deepskyblue'>:</span>
            <span style='color:blueviolet'>return</span> <span style='color:darkgreen'>env</span>
        <span style='color:darkgreen'>enable_lto</span> <span style='color:deepskyblue'>=</span> <span style='color:darkgreen'>setupext</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>config</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>getboolean</span>(<span style='color:crimson'>'libs'</span><span style='color:deepskyblue'>,</span> <span style='color:crimson'>'enable_lto'</span><span style='color:deepskyblue'>,</span>
                                                <span style='color:darkgreen'>fallback</span><span style='color:deepskyblue'>=</span><span style='color:blueviolet'>None</span><span style='color:deepskyblue'>)</span>

        <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>prepare_flags</span>(<span style='color:darkgreen'>name</span><span style='color:deepskyblue'>,</span> <span style='color:darkgreen'>enable_lto</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>:</span>
            <span style='color:crimson'>"""
            Prepare *FLAGS from the environment.
            If set, return them, and also check whether LTO is disabled in each
            one, raising an error if Matplotlib config explicitly enabled LTO.
            """</span>
            <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>name</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>os</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>environ</span><span style='color:deepskyblue'>:</span>
                <span style='color:blueviolet'>if</span> <span style='color:crimson'>'-fno-lto'</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>os</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>environ</span><span style='color:deepskyblue'>[</span><span style='color:darkgreen'>name</span><span style='color:deepskyblue'>]</span><span style='color:deepskyblue'>:</span>
                    <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>enable_lto</span> <span style='color:blueviolet'>is</span> <span style='color:blueviolet'>True</span><span style='color:deepskyblue'>:</span>
                        <span style='color:blueviolet'>raise</span> <span style='color:darkgreen'>ValueError</span>(<span style='color:crimson'>'Configuration enable_lto=True, but '</span>
                                         <span style='color:crimson'>'{0} contains -fno-lto'</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>format</span>(<span style='color:darkgreen'>name</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>)</span>
                    <span style='color:darkgreen'>enable_lto</span> <span style='color:deepskyblue'>=</span> <span style='color:blueviolet'>False</span>
                <span style='color:blueviolet'>return</span> <span style='color:deepskyblue'>[</span><span style='color:darkgreen'>os</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>environ</span><span style='color:deepskyblue'>[</span><span style='color:darkgreen'>name</span><span style='color:deepskyblue'>]</span><span style='color:deepskyblue'>]</span><span style='color:deepskyblue'>,</span> <span style='color:darkgreen'>enable_lto</span>
            <span style='color:blueviolet'>return</span> <span style='color:deepskyblue'>[</span><span style='color:deepskyblue'>]</span><span style='color:deepskyblue'>,</span> <span style='color:darkgreen'>enable_lto</span>

        <span style='color:darkgreen'>_</span><span style='color:deepskyblue'>,</span> <span style='color:darkgreen'>enable_lto</span> <span style='color:deepskyblue'>=</span> <span style='color:darkgreen'>prepare_flags</span>(<span style='color:crimson'>'CFLAGS'</span><span style='color:deepskyblue'>,</span> <span style='color:darkgreen'>enable_lto</span><span style='color:deepskyblue'>)</span>  <span style='color:darkblue'># Only check lto.</span>
        <span style='color:darkgreen'>cppflags</span><span style='color:deepskyblue'>,</span> <span style='color:darkgreen'>enable_lto</span> <span style='color:deepskyblue'>=</span> <span style='color:darkgreen'>prepare_flags</span>(<span style='color:crimson'>'CPPFLAGS'</span><span style='color:deepskyblue'>,</span> <span style='color:darkgreen'>enable_lto</span><span style='color:deepskyblue'>)</span>
        <span style='color:darkgreen'>cxxflags</span><span style='color:deepskyblue'>,</span> <span style='color:darkgreen'>enable_lto</span> <span style='color:deepskyblue'>=</span> <span style='color:darkgreen'>prepare_flags</span>(<span style='color:crimson'>'CXXFLAGS'</span><span style='color:deepskyblue'>,</span> <span style='color:darkgreen'>enable_lto</span><span style='color:deepskyblue'>)</span>
        <span style='color:darkgreen'>ldflags</span><span style='color:deepskyblue'>,</span> <span style='color:darkgreen'>enable_lto</span> <span style='color:deepskyblue'>=</span> <span style='color:darkgreen'>prepare_flags</span>(<span style='color:crimson'>'LDFLAGS'</span><span style='color:deepskyblue'>,</span> <span style='color:darkgreen'>enable_lto</span><span style='color:deepskyblue'>)</span>

        <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>enable_lto</span> <span style='color:blueviolet'>is</span> <span style='color:blueviolet'>False</span><span style='color:deepskyblue'>:</span>
            <span style='color:blueviolet'>return</span> <span style='color:darkgreen'>env</span>

        <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>has_flag</span>(<span style='color:darkgreen'>self</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>compiler</span><span style='color:deepskyblue'>,</span> <span style='color:crimson'>'-fvisibility=hidden'</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>:</span>
            <span style='color:blueviolet'>for</span> <span style='color:darkgreen'>ext</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>self</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>extensions</span><span style='color:deepskyblue'>:</span>
                <span style='color:darkgreen'>ext</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>extra_compile_args</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>append</span>(<span style='color:crimson'>'-fvisibility=hidden'</span><span style='color:deepskyblue'>)</span>
            <span style='color:darkgreen'>cppflags</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>append</span>(<span style='color:crimson'>'-fvisibility=hidden'</span><span style='color:deepskyblue'>)</span>
        <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>has_flag</span>(<span style='color:darkgreen'>self</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>compiler</span><span style='color:deepskyblue'>,</span> <span style='color:crimson'>'-fvisibility-inlines-hidden'</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>:</span>
            <span style='color:blueviolet'>for</span> <span style='color:darkgreen'>ext</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>self</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>extensions</span><span style='color:deepskyblue'>:</span>
                <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>self</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>compiler</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>detect_language</span>(<span style='color:darkgreen'>ext</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>sources</span><span style='color:deepskyblue'>)</span> <span style='color:fuchsia'>!=</span> <span style='color:crimson'>'cpp'</span><span style='color:deepskyblue'>:</span>
                    <span style='color:blueviolet'>continue</span>
                <span style='color:darkgreen'>ext</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>extra_compile_args</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>append</span>(<span style='color:crimson'>'-fvisibility-inlines-hidden'</span><span style='color:deepskyblue'>)</span>
            <span style='color:darkgreen'>cxxflags</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>append</span>(<span style='color:crimson'>'-fvisibility-inlines-hidden'</span><span style='color:deepskyblue'>)</span>
        <span style='color:darkgreen'>ranlib</span> <span style='color:deepskyblue'>=</span> <span style='color:crimson'>'RANLIB'</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>env</span>
        <span style='color:blueviolet'>if</span> <span style='color:blueviolet'>not</span> <span style='color:darkgreen'>ranlib</span> <span style='color:blueviolet'>and</span> <span style='color:darkgreen'>self</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>compiler</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>compiler_type</span> <span style='color:deepskyblue'>=</span><span style='color:deepskyblue'>=</span> <span style='color:crimson'>'unix'</span><span style='color:deepskyblue'>:</span>
            <span style='color:blueviolet'>try</span><span style='color:deepskyblue'>:</span>
                <span style='color:darkgreen'>result</span> <span style='color:deepskyblue'>=</span> <span style='color:darkgreen'>subprocess</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>run</span>(<span style='color:darkgreen'>self</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>compiler</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>compiler</span> <span style='color:fuchsia'>+</span>
                                        <span style='color:deepskyblue'>[</span><span style='color:crimson'>'--version'</span><span style='color:deepskyblue'>]</span><span style='color:deepskyblue'>,</span>
                                        <span style='color:darkgreen'>stdout</span><span style='color:deepskyblue'>=</span><span style='color:darkgreen'>subprocess</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>PIPE</span><span style='color:deepskyblue'>,</span>
                                        <span style='color:darkgreen'>stderr</span><span style='color:deepskyblue'>=</span><span style='color:darkgreen'>subprocess</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>STDOUT</span><span style='color:deepskyblue'>,</span>
                                        <span style='color:darkgreen'>universal_newlines</span><span style='color:deepskyblue'>=</span><span style='color:blueviolet'>True</span><span style='color:deepskyblue'>)</span>
            <span style='color:blueviolet'>except</span> <span style='color:darkgreen'>Exception</span> <span style='color:blueviolet'>as</span> <span style='color:darkgreen'>e</span><span style='color:deepskyblue'>:</span>
                <span style='color:blueviolet'>pass</span>
            <span style='color:blueviolet'>else</span><span style='color:deepskyblue'>:</span>
                <span style='color:darkgreen'>version</span> <span style='color:deepskyblue'>=</span> <span style='color:darkgreen'>result</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>stdout</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>lower</span>(<span style='color:deepskyblue'>)</span>
                <span style='color:blueviolet'>if</span> <span style='color:crimson'>'gcc'</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>version</span><span style='color:deepskyblue'>:</span>
                    <span style='color:darkgreen'>ranlib</span> <span style='color:deepskyblue'>=</span> <span style='color:darkgreen'>shutil</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>which</span>(<span style='color:crimson'>'gcc-ranlib'</span><span style='color:deepskyblue'>)</span>
                <span style='color:blueviolet'>elif</span> <span style='color:crimson'>'clang'</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>version</span><span style='color:deepskyblue'>:</span>
                    <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>sys</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>platform</span> <span style='color:deepskyblue'>=</span><span style='color:deepskyblue'>=</span> <span style='color:crimson'>'darwin'</span><span style='color:deepskyblue'>:</span>
                        <span style='color:darkgreen'>ranlib</span> <span style='color:deepskyblue'>=</span> <span style='color:blueviolet'>True</span>
                    <span style='color:blueviolet'>else</span><span style='color:deepskyblue'>:</span>
                        <span style='color:darkgreen'>ranlib</span> <span style='color:deepskyblue'>=</span> <span style='color:darkgreen'>shutil</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>which</span>(<span style='color:crimson'>'llvm-ranlib'</span><span style='color:deepskyblue'>)</span>
        <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>ranlib</span> <span style='color:blueviolet'>and</span> <span style='color:darkgreen'>has_flag</span>(<span style='color:darkgreen'>self</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>compiler</span><span style='color:deepskyblue'>,</span> <span style='color:crimson'>'-flto'</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>:</span>
            <span style='color:blueviolet'>for</span> <span style='color:darkgreen'>ext</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>self</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>extensions</span><span style='color:deepskyblue'>:</span>
                <span style='color:darkgreen'>ext</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>extra_compile_args</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>append</span>(<span style='color:crimson'>'-flto'</span><span style='color:deepskyblue'>)</span>
            <span style='color:darkgreen'>cppflags</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>append</span>(<span style='color:crimson'>'-flto'</span><span style='color:deepskyblue'>)</span>
            <span style='color:darkgreen'>ldflags</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>append</span>(<span style='color:crimson'>'-flto'</span><span style='color:deepskyblue'>)</span>
            <span style='color:darkblue'># Needed so FreeType static library doesn't lose its LTO objects.</span>
            <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>isinstance</span>(<span style='color:darkgreen'>ranlib</span><span style='color:deepskyblue'>,</span> <span style='color:darkgreen'>str</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>:</span>
                <span style='color:darkgreen'>env</span><span style='color:deepskyblue'>[</span><span style='color:crimson'>'RANLIB'</span><span style='color:deepskyblue'>]</span> <span style='color:deepskyblue'>=</span> <span style='color:darkgreen'>ranlib</span>

        <span style='color:darkgreen'>env</span><span style='color:deepskyblue'>[</span><span style='color:crimson'>'CPPFLAGS'</span><span style='color:deepskyblue'>]</span> <span style='color:deepskyblue'>=</span> <span style='color:crimson'>' '</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>join</span>(<span style='color:darkgreen'>cppflags</span><span style='color:deepskyblue'>)</span>
        <span style='color:darkgreen'>env</span><span style='color:deepskyblue'>[</span><span style='color:crimson'>'CXXFLAGS'</span><span style='color:deepskyblue'>]</span> <span style='color:deepskyblue'>=</span> <span style='color:crimson'>' '</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>join</span>(<span style='color:darkgreen'>cxxflags</span><span style='color:deepskyblue'>)</span>
        <span style='color:darkgreen'>env</span><span style='color:deepskyblue'>[</span><span style='color:crimson'>'LDFLAGS'</span><span style='color:deepskyblue'>]</span> <span style='color:deepskyblue'>=</span> <span style='color:crimson'>' '</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>join</span>(<span style='color:darkgreen'>ldflags</span><span style='color:deepskyblue'>)</span>

        <span style='color:blueviolet'>return</span> <span style='color:darkgreen'>env</span>

    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>build_extensions</span>(<span style='color:darkgreen'>self</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>:</span>
        <span style='color:darkblue'># Remove the -Wstrict-prototypes option, it's not valid for C++.  Fixed</span>
        <span style='color:darkblue'># in Py3.7 as bpo-5755.</span>
        <span style='color:blueviolet'>try</span><span style='color:deepskyblue'>:</span>
            <span style='color:darkgreen'>self</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>compiler</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>compiler_so</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>remove</span>(<span style='color:crimson'>'-Wstrict-prototypes'</span><span style='color:deepskyblue'>)</span>
        <span style='color:blueviolet'>except</span> (<span style='color:darkgreen'>ValueError</span><span style='color:deepskyblue'>,</span> <span style='color:darkgreen'>AttributeError</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>:</span>
            <span style='color:blueviolet'>pass</span>
        <span style='color:blueviolet'>if</span> (<span style='color:darkgreen'>self</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>compiler</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>compiler_type</span> <span style='color:deepskyblue'>=</span><span style='color:deepskyblue'>=</span> <span style='color:crimson'>'msvc'</span> <span style='color:blueviolet'>and</span>
                <span style='color:darkgreen'>os</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>environ</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>get</span>(<span style='color:crimson'>'MPL_DISABLE_FH4'</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>:</span>
            <span style='color:darkblue'># Disable FH4 Exception Handling implementation so that we don't</span>
            <span style='color:darkblue'># require VCRUNTIME140_1.dll. For more details, see:</span>
            <span style='color:darkblue'># https://devblogs.microsoft.com/cppblog/making-cpp-exception-handling-smaller-x64/</span>
            <span style='color:darkblue'># https://github.com/joerick/cibuildwheel/issues/423#issuecomment-677763904</span>
            <span style='color:blueviolet'>for</span> <span style='color:darkgreen'>ext</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>self</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>extensions</span><span style='color:deepskyblue'>:</span>
                <span style='color:darkgreen'>ext</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>extra_compile_args</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>append</span>(<span style='color:crimson'>'/d2FH4-'</span><span style='color:deepskyblue'>)</span>

        <span style='color:darkgreen'>env</span> <span style='color:deepskyblue'>=</span> <span style='color:darkgreen'>self</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>add_optimization_flags</span>(<span style='color:deepskyblue'>)</span>
        <span style='color:blueviolet'>for</span> <span style='color:darkgreen'>package</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>good_packages</span><span style='color:deepskyblue'>:</span>
            <span style='color:darkgreen'>package</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>do_custom_build</span>(<span style='color:darkgreen'>env</span><span style='color:deepskyblue'>)</span>
        <span style='color:blueviolet'>return</span> <span style='color:darkgreen'>super</span>(<span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>build_extensions</span>(<span style='color:deepskyblue'>)</span>

    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>build_extension</span>(<span style='color:darkgreen'>self</span><span style='color:deepskyblue'>,</span> <span style='color:darkgreen'>ext</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>:</span>
        <span style='color:darkblue'># When C coverage is enabled, the path to the object file is saved.</span>
        <span style='color:darkblue'># Since we re-use source files in multiple extensions, libgcov will</span>
        <span style='color:darkblue'># complain at runtime that it is trying to save coverage for the same</span>
        <span style='color:darkblue'># object file at different timestamps (since each source is compiled</span>
        <span style='color:darkblue'># again for each extension). Thus, we need to use unique temporary</span>
        <span style='color:darkblue'># build directories to store object files for each extension.</span>
        <span style='color:darkgreen'>orig_build_temp</span> <span style='color:deepskyblue'>=</span> <span style='color:darkgreen'>self</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>build_temp</span>
        <span style='color:darkgreen'>self</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>build_temp</span> <span style='color:deepskyblue'>=</span> <span style='color:darkgreen'>os</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>path</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>join</span>(<span style='color:darkgreen'>self</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>build_temp</span><span style='color:deepskyblue'>,</span> <span style='color:darkgreen'>ext</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>name</span><span style='color:deepskyblue'>)</span>
        <span style='color:blueviolet'>try</span><span style='color:deepskyblue'>:</span>
            <span style='color:darkgreen'>super</span>(<span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>build_extension</span>(<span style='color:darkgreen'>ext</span><span style='color:deepskyblue'>)</span>
        <span style='color:blueviolet'>finally</span><span style='color:deepskyblue'>:</span>
            <span style='color:darkgreen'>self</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>build_temp</span> <span style='color:deepskyblue'>=</span> <span style='color:darkgreen'>orig_build_temp</span>


<span style='color:blueviolet'>def</span> <span style='color:darkgreen'>update_matplotlibrc</span>(<span style='color:darkgreen'>path</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>:</span>
    <span style='color:darkblue'># If packagers want to change the default backend, insert a `#backend: ...`</span>
    <span style='color:darkblue'># line.  Otherwise, use the default `##backend: Agg` which has no effect</span>
    <span style='color:darkblue'># even after decommenting, which allows _auto_backend_sentinel to be filled</span>
    <span style='color:darkblue'># in at import time.</span>
    <span style='color:darkgreen'>template_lines</span> <span style='color:deepskyblue'>=</span> <span style='color:darkgreen'>path</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>read_text</span>(<span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>splitlines</span>(<span style='color:blueviolet'>True</span><span style='color:deepskyblue'>)</span>
    <span style='color:darkgreen'>backend_line_idx</span><span style='color:deepskyblue'>,</span> <span style='color:deepskyblue'>=</span> <span style='color:deepskyblue'>[</span>  <span style='color:darkblue'># Also asserts that there is a single such line.</span>
        <span style='color:darkgreen'>idx</span> <span style='color:blueviolet'>for</span> <span style='color:darkgreen'>idx</span><span style='color:deepskyblue'>,</span> <span style='color:darkgreen'>line</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>enumerate</span>(<span style='color:darkgreen'>template_lines</span><span style='color:deepskyblue'>)</span>
        <span style='color:blueviolet'>if</span> <span style='color:crimson'>"#backend:"</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>line</span><span style='color:deepskyblue'>]</span>
    <span style='color:darkgreen'>template_lines</span><span style='color:deepskyblue'>[</span><span style='color:darkgreen'>backend_line_idx</span><span style='color:deepskyblue'>]</span> <span style='color:deepskyblue'>=</span> (
        <span style='color:crimson'>"#backend: {}"</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>format</span>(<span style='color:darkgreen'>setupext</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>options</span><span style='color:deepskyblue'>[</span><span style='color:crimson'>"backend"</span><span style='color:deepskyblue'>]</span><span style='color:deepskyblue'>)</span>
        <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>setupext</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>options</span><span style='color:deepskyblue'>[</span><span style='color:crimson'>"backend"</span><span style='color:deepskyblue'>]</span>
        <span style='color:blueviolet'>else</span> <span style='color:crimson'>"##backend: Agg"</span><span style='color:deepskyblue'>)</span>
    <span style='color:darkgreen'>path</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>write_text</span>(<span style='color:crimson'>""</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>join</span>(<span style='color:darkgreen'>template_lines</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>)</span>


<span style='color:blueviolet'>class</span> <span style='color:darkgreen'>BuildPy</span>(<span style='color:darkgreen'>setuptools</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>command</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>build_py</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>build_py</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>:</span>
    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>run</span>(<span style='color:darkgreen'>self</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>:</span>
        <span style='color:darkgreen'>super</span>(<span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>run</span>(<span style='color:deepskyblue'>)</span>
        <span style='color:darkgreen'>update_matplotlibrc</span>(
            <span style='color:darkgreen'>Path</span>(<span style='color:darkgreen'>self</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>build_lib</span><span style='color:deepskyblue'>,</span> <span style='color:crimson'>"matplotlib/mpl-data/matplotlibrc"</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>)</span>


<span style='color:blueviolet'>class</span> <span style='color:darkgreen'>Sdist</span>(<span style='color:darkgreen'>setuptools</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>command</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>sdist</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>sdist</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>:</span>
    <span style='color:blueviolet'>def</span> <span style='color:darkgreen'>make_release_tree</span>(<span style='color:darkgreen'>self</span><span style='color:deepskyblue'>,</span> <span style='color:darkgreen'>base_dir</span><span style='color:deepskyblue'>,</span> <span style='color:darkgreen'>files</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>:</span>
        <span style='color:darkgreen'>super</span>(<span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>make_release_tree</span>(<span style='color:darkgreen'>base_dir</span><span style='color:deepskyblue'>,</span> <span style='color:darkgreen'>files</span><span style='color:deepskyblue'>)</span>
        <span style='color:darkgreen'>update_matplotlibrc</span>(
            <span style='color:darkgreen'>Path</span>(<span style='color:darkgreen'>base_dir</span><span style='color:deepskyblue'>,</span> <span style='color:crimson'>"lib/matplotlib/mpl-data/matplotlibrc"</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>)</span>


<span style='color:darkgreen'>package_data</span> <span style='color:deepskyblue'>=</span> <span style='color:deepskyblue'>{</span><span style='color:deepskyblue'>}</span>  <span style='color:darkblue'># Will be filled below by the various components.</span>

<span style='color:darkblue'># If the user just queries for information, don't bother figuring out which</span>
<span style='color:darkblue'># packages to build or install.</span>
<span style='color:blueviolet'>if</span> <span style='color:blueviolet'>not</span> (<span style='color:darkgreen'>any</span>(<span style='color:crimson'>'--'</span> <span style='color:fuchsia'>+</span> <span style='color:darkgreen'>opt</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>sys</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>argv</span>
            <span style='color:blueviolet'>for</span> <span style='color:darkgreen'>opt</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>Distribution</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>display_option_names</span> <span style='color:fuchsia'>+</span> <span style='color:deepskyblue'>[</span><span style='color:crimson'>'help'</span><span style='color:deepskyblue'>]</span><span style='color:deepskyblue'>)</span>
        <span style='color:blueviolet'>or</span> <span style='color:crimson'>'clean'</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>sys</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>argv</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>:</span>
    <span style='color:darkblue'># Go through all of the packages and figure out which ones we are</span>
    <span style='color:darkblue'># going to build/install.</span>
    <span style='color:darkgreen'>print_raw</span>(<span style='color:deepskyblue'>)</span>
    <span style='color:darkgreen'>print_raw</span>(<span style='color:crimson'>"Edit setup.cfg to change the build options; "</span>
              <span style='color:crimson'>"suppress output with --quiet."</span><span style='color:deepskyblue'>)</span>
    <span style='color:darkgreen'>print_raw</span>(<span style='color:deepskyblue'>)</span>
    <span style='color:darkgreen'>print_raw</span>(<span style='color:crimson'>"BUILDING MATPLOTLIB"</span><span style='color:deepskyblue'>)</span>

    <span style='color:darkgreen'>good_packages</span> <span style='color:deepskyblue'>=</span> <span style='color:deepskyblue'>[</span><span style='color:deepskyblue'>]</span>
    <span style='color:blueviolet'>for</span> <span style='color:darkgreen'>package</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>mpl_packages</span><span style='color:deepskyblue'>:</span>
        <span style='color:blueviolet'>try</span><span style='color:deepskyblue'>:</span>
            <span style='color:darkgreen'>message</span> <span style='color:deepskyblue'>=</span> <span style='color:darkgreen'>package</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>check</span>(<span style='color:deepskyblue'>)</span>
        <span style='color:blueviolet'>except</span> <span style='color:darkgreen'>setupext</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>Skipped</span> <span style='color:blueviolet'>as</span> <span style='color:darkgreen'>e</span><span style='color:deepskyblue'>:</span>
            <span style='color:darkgreen'>print_status</span>(<span style='color:darkgreen'>package</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>name</span><span style='color:deepskyblue'>,</span> <span style='color:crimson'>"no  [{e}]"</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>format</span>(<span style='color:darkgreen'>e</span><span style='color:deepskyblue'>=</span><span style='color:darkgreen'>e</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>)</span>
            <span style='color:blueviolet'>continue</span>
        <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>message</span> <span style='color:blueviolet'>is</span> <span style='color:blueviolet'>not</span> <span style='color:blueviolet'>None</span><span style='color:deepskyblue'>:</span>
            <span style='color:darkgreen'>print_status</span>(<span style='color:darkgreen'>package</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>name</span><span style='color:deepskyblue'>,</span>
                         <span style='color:crimson'>"yes [{message}]"</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>format</span>(<span style='color:darkgreen'>message</span><span style='color:deepskyblue'>=</span><span style='color:darkgreen'>message</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>)</span>
        <span style='color:darkgreen'>good_packages</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>append</span>(<span style='color:darkgreen'>package</span><span style='color:deepskyblue'>)</span>

    <span style='color:darkgreen'>print_raw</span>(<span style='color:deepskyblue'>)</span>

    <span style='color:darkblue'># Now collect all of the information we need to build all of the packages.</span>
    <span style='color:blueviolet'>for</span> <span style='color:darkgreen'>package</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>good_packages</span><span style='color:deepskyblue'>:</span>
        <span style='color:darkblue'># Extension modules only get added in build_ext, as numpy will have</span>
        <span style='color:darkblue'># been installed (as setup_requires) at that point.</span>
        <span style='color:darkgreen'>data</span> <span style='color:deepskyblue'>=</span> <span style='color:darkgreen'>package</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>get_package_data</span>(<span style='color:deepskyblue'>)</span>
        <span style='color:blueviolet'>for</span> <span style='color:darkgreen'>key</span><span style='color:deepskyblue'>,</span> <span style='color:darkgreen'>val</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>data</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>items</span>(<span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>:</span>
            <span style='color:darkgreen'>package_data</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>setdefault</span>(<span style='color:darkgreen'>key</span><span style='color:deepskyblue'>,</span> <span style='color:deepskyblue'>[</span><span style='color:deepskyblue'>]</span><span style='color:deepskyblue'>)</span>
            <span style='color:darkgreen'>package_data</span><span style='color:deepskyblue'>[</span><span style='color:darkgreen'>key</span><span style='color:deepskyblue'>]</span> <span style='color:deepskyblue'>=</span> <span style='color:darkgreen'>list</span>(<span style='color:darkgreen'>set</span>(<span style='color:darkgreen'>val</span> <span style='color:fuchsia'>+</span> <span style='color:darkgreen'>package_data</span><span style='color:deepskyblue'>[</span><span style='color:darkgreen'>key</span><span style='color:deepskyblue'>]</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>)</span>

<span style='color:darkgreen'>setup</span>(  <span style='color:darkblue'># Finally, pass this all along to distutils to do the heavy lifting.</span>
    <span style='color:darkgreen'>name</span><span style='color:deepskyblue'>=</span><span style='color:crimson'>"matplotlib"</span><span style='color:deepskyblue'>,</span>
    <span style='color:darkgreen'>description</span><span style='color:deepskyblue'>=</span><span style='color:crimson'>"Python plotting package"</span><span style='color:deepskyblue'>,</span>
    <span style='color:darkgreen'>author</span><span style='color:deepskyblue'>=</span><span style='color:crimson'>"John D. Hunter, Michael Droettboom"</span><span style='color:deepskyblue'>,</span>
    <span style='color:darkgreen'>author_email</span><span style='color:deepskyblue'>=</span><span style='color:crimson'>"matplotlib-users@python.org"</span><span style='color:deepskyblue'>,</span>
    <span style='color:darkgreen'>url</span><span style='color:deepskyblue'>=</span><span style='color:crimson'>"https://matplotlib.org"</span><span style='color:deepskyblue'>,</span>
    <span style='color:darkgreen'>download_url</span><span style='color:deepskyblue'>=</span><span style='color:crimson'>"https://matplotlib.org/users/installing.html"</span><span style='color:deepskyblue'>,</span>
    <span style='color:darkgreen'>project_urls</span><span style='color:deepskyblue'>=</span><span style='color:deepskyblue'>{</span>
        <span style='color:crimson'>'Documentation'</span><span style='color:deepskyblue'>:</span> <span style='color:crimson'>'https://matplotlib.org'</span><span style='color:deepskyblue'>,</span>
        <span style='color:crimson'>'Source Code'</span><span style='color:deepskyblue'>:</span> <span style='color:crimson'>'https://github.com/matplotlib/matplotlib'</span><span style='color:deepskyblue'>,</span>
        <span style='color:crimson'>'Bug Tracker'</span><span style='color:deepskyblue'>:</span> <span style='color:crimson'>'https://github.com/matplotlib/matplotlib/issues'</span><span style='color:deepskyblue'>,</span>
        <span style='color:crimson'>'Forum'</span><span style='color:deepskyblue'>:</span> <span style='color:crimson'>'https://discourse.matplotlib.org/'</span><span style='color:deepskyblue'>,</span>
        <span style='color:crimson'>'Donate'</span><span style='color:deepskyblue'>:</span> <span style='color:crimson'>'https://numfocus.org/donate-to-matplotlib'</span>
    <span style='color:deepskyblue'>}</span><span style='color:deepskyblue'>,</span>
    <span style='color:darkgreen'>long_description</span><span style='color:deepskyblue'>=</span><span style='color:darkgreen'>Path</span>(<span style='color:crimson'>"README.rst"</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>read_text</span>(<span style='color:darkgreen'>encoding</span><span style='color:deepskyblue'>=</span><span style='color:crimson'>"utf-8"</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>,</span>
    <span style='color:darkgreen'>long_description_content_type</span><span style='color:deepskyblue'>=</span><span style='color:crimson'>"text/x-rst"</span><span style='color:deepskyblue'>,</span>
    <span style='color:darkgreen'>license</span><span style='color:deepskyblue'>=</span><span style='color:crimson'>"PSF"</span><span style='color:deepskyblue'>,</span>
    <span style='color:darkgreen'>platforms</span><span style='color:deepskyblue'>=</span><span style='color:crimson'>"any"</span><span style='color:deepskyblue'>,</span>
    <span style='color:darkgreen'>classifiers</span><span style='color:deepskyblue'>=</span><span style='color:deepskyblue'>[</span>
        <span style='color:crimson'>'Development Status :: 5 - Production/Stable'</span><span style='color:deepskyblue'>,</span>
        <span style='color:crimson'>'Framework :: Matplotlib'</span><span style='color:deepskyblue'>,</span>
        <span style='color:crimson'>'Intended Audience :: Science/Research'</span><span style='color:deepskyblue'>,</span>
        <span style='color:crimson'>'Intended Audience :: Education'</span><span style='color:deepskyblue'>,</span>
        <span style='color:crimson'>'License :: OSI Approved :: Python Software Foundation License'</span><span style='color:deepskyblue'>,</span>
        <span style='color:crimson'>'Programming Language :: Python'</span><span style='color:deepskyblue'>,</span>
        <span style='color:crimson'>'Programming Language :: Python :: 3'</span><span style='color:deepskyblue'>,</span>
        <span style='color:crimson'>'Programming Language :: Python :: 3.7'</span><span style='color:deepskyblue'>,</span>
        <span style='color:crimson'>'Programming Language :: Python :: 3.8'</span><span style='color:deepskyblue'>,</span>
        <span style='color:crimson'>'Programming Language :: Python :: 3.9'</span><span style='color:deepskyblue'>,</span>
        <span style='color:crimson'>'Topic :: Scientific/Engineering :: Visualization'</span><span style='color:deepskyblue'>,</span>
    <span style='color:deepskyblue'>]</span><span style='color:deepskyblue'>,</span>

    <span style='color:darkgreen'>package_dir</span><span style='color:deepskyblue'>=</span><span style='color:deepskyblue'>{</span><span style='color:crimson'>""</span><span style='color:deepskyblue'>:</span> <span style='color:crimson'>"lib"</span><span style='color:deepskyblue'>}</span><span style='color:deepskyblue'>,</span>
    <span style='color:darkgreen'>packages</span><span style='color:deepskyblue'>=</span><span style='color:darkgreen'>find_packages</span>(<span style='color:crimson'>"lib"</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>,</span>
    <span style='color:darkgreen'>namespace_packages</span><span style='color:deepskyblue'>=</span><span style='color:deepskyblue'>[</span><span style='color:crimson'>"mpl_toolkits"</span><span style='color:deepskyblue'>]</span><span style='color:deepskyblue'>,</span>
    <span style='color:darkgreen'>py_modules</span><span style='color:deepskyblue'>=</span><span style='color:deepskyblue'>[</span><span style='color:crimson'>"pylab"</span><span style='color:deepskyblue'>]</span><span style='color:deepskyblue'>,</span>
    <span style='color:darkblue'># Dummy extension to trigger build_ext, which will swap it out with</span>
    <span style='color:darkblue'># real extensions that can depend on numpy for the build.</span>
    <span style='color:darkgreen'>ext_modules</span><span style='color:deepskyblue'>=</span><span style='color:deepskyblue'>[</span><span style='color:darkgreen'>Extension</span>(<span style='color:crimson'>""</span><span style='color:deepskyblue'>,</span> <span style='color:deepskyblue'>[</span><span style='color:deepskyblue'>]</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>]</span><span style='color:deepskyblue'>,</span>
    <span style='color:darkgreen'>package_data</span><span style='color:deepskyblue'>=</span><span style='color:darkgreen'>package_data</span><span style='color:deepskyblue'>,</span>

    <span style='color:darkgreen'>python_requires</span><span style='color:deepskyblue'>=</span><span style='color:crimson'>'>={}'</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>format</span>(<span style='color:crimson'>'.'</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>join</span>(<span style='color:darkgreen'>str</span>(<span style='color:darkgreen'>n</span><span style='color:deepskyblue'>)</span> <span style='color:blueviolet'>for</span> <span style='color:darkgreen'>n</span> <span style='color:blueviolet'>in</span> <span style='color:darkgreen'>py_min_version</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>,</span>
    <span style='color:darkgreen'>setup_requires</span><span style='color:deepskyblue'>=</span><span style='color:deepskyblue'>[</span>
        <span style='color:crimson'>"certifi>=2020.06.20"</span><span style='color:deepskyblue'>,</span>
        <span style='color:crimson'>"numpy>=1.17"</span><span style='color:deepskyblue'>,</span>
        <span style='color:crimson'>"setuptools_scm>=4"</span><span style='color:deepskyblue'>,</span>
        <span style='color:crimson'>"setuptools_scm_git_archive"</span><span style='color:deepskyblue'>,</span>
    <span style='color:deepskyblue'>]</span><span style='color:deepskyblue'>,</span>
    <span style='color:darkgreen'>install_requires</span><span style='color:deepskyblue'>=</span><span style='color:deepskyblue'>[</span>
        <span style='color:crimson'>"cycler>=0.10"</span><span style='color:deepskyblue'>,</span>
        <span style='color:crimson'>"kiwisolver>=1.0.1"</span><span style='color:deepskyblue'>,</span>
        <span style='color:crimson'>"numpy>=1.17"</span><span style='color:deepskyblue'>,</span>
        <span style='color:crimson'>"pillow>=6.2.0"</span><span style='color:deepskyblue'>,</span>
        <span style='color:crimson'>"pyparsing>=2.2.1"</span><span style='color:deepskyblue'>,</span>
        <span style='color:crimson'>"python-dateutil>=2.7"</span><span style='color:deepskyblue'>,</span>
    <span style='color:deepskyblue'>]</span> <span style='color:fuchsia'>+</span> (
        <span style='color:darkblue'># Installing from a git checkout.</span>
        <span style='color:deepskyblue'>[</span><span style='color:crimson'>"setuptools_scm>=4"</span><span style='color:deepskyblue'>]</span> <span style='color:blueviolet'>if</span> <span style='color:darkgreen'>Path</span>(<span style='color:darkgreen'>__file__</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>with_name</span>(<span style='color:crimson'>".git"</span><span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>.</span><span style='color:darkgreen'>exists</span>(<span style='color:deepskyblue'>)</span>
        <span style='color:blueviolet'>else</span> <span style='color:deepskyblue'>[</span><span style='color:deepskyblue'>]</span>
    <span style='color:deepskyblue'>)</span><span style='color:deepskyblue'>,</span>
    <span style='color:darkgreen'>use_scm_version</span><span style='color:deepskyblue'>=</span><span style='color:deepskyblue'>{</span>
        <span style='color:crimson'>"version_scheme"</span><span style='color:deepskyblue'>:</span> <span style='color:crimson'>"release-branch-semver"</span><span style='color:deepskyblue'>,</span>
        <span style='color:crimson'>"local_scheme"</span><span style='color:deepskyblue'>:</span> <span style='color:crimson'>"node-and-date"</span><span style='color:deepskyblue'>,</span>
        <span style='color:crimson'>"write_to"</span><span style='color:deepskyblue'>:</span> <span style='color:crimson'>"lib/matplotlib/_version.py"</span><span style='color:deepskyblue'>,</span>
        <span style='color:crimson'>"parentdir_prefix_version"</span><span style='color:deepskyblue'>:</span> <span style='color:crimson'>"matplotlib-"</span><span style='color:deepskyblue'>,</span>
        <span style='color:crimson'>"fallback_version"</span><span style='color:deepskyblue'>:</span> <span style='color:crimson'>"0.0+UNKNOWN"</span><span style='color:deepskyblue'>,</span>
    <span style='color:deepskyblue'>}</span><span style='color:deepskyblue'>,</span>
    <span style='color:darkgreen'>cmdclass</span><span style='color:deepskyblue'>=</span><span style='color:deepskyblue'>{</span>
        <span style='color:crimson'>"test"</span><span style='color:deepskyblue'>:</span> <span style='color:darkgreen'>NoopTestCommand</span><span style='color:deepskyblue'>,</span>
        <span style='color:crimson'>"build_ext"</span><span style='color:deepskyblue'>:</span> <span style='color:darkgreen'>BuildExtraLibraries</span><span style='color:deepskyblue'>,</span>
        <span style='color:crimson'>"build_py"</span><span style='color:deepskyblue'>:</span> <span style='color:darkgreen'>BuildPy</span><span style='color:deepskyblue'>,</span>
        <span style='color:crimson'>"sdist"</span><span style='color:deepskyblue'>:</span> <span style='color:darkgreen'>Sdist</span><span style='color:deepskyblue'>,</span>
    <span style='color:deepskyblue'>}</span><span style='color:deepskyblue'>,</span>
<span style='color:deepskyblue'>)</span>
        </pre>
    </body>
</html>